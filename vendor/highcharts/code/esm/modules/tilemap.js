/**
 * Highmaps JS v12.4.0-modified (2025-11-13)
 * @module highcharts/modules/tilemap
 * @requires highcharts
 * @requires highcharts/modules/map
 *
 * Tilemap module
 *
 * (c) 2010-2025 Highsoft AS
 *
 * License: www.highcharts.com/license
 */let t;import*as e from"../highcharts.js";import*as i from"./coloraxis.js";import"../highcharts.js";import*as o from"../highcharts-more.js";var s,r,a,n,l,h,p,d,c={};c.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return c.d(e,{a:e}),e},c.d=(t,e)=>{for(var i in e)c.o(e,i)&&!c.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},c.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);let u=e.default;var m=c.n(u);let g=i.default.ColorAxis;var f=c.n(g);/**
 * @license Highcharts JS v12.4.0-modified (2025-11-13)
 * @module highcharts/modules/color-axis
 * @requires highcharts
 *
 * ColorAxis module
 *
 * (c) 2012-2025 Pawel Potaczek
 *
 * License: www.highcharts.com/license
 */let y=m();y.ColorAxis=y.ColorAxis||f(),y.ColorAxis.compose(y.Chart,y.Fx,y.Legend,y.Series);let x={lang:{zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation:{buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}},{defined:b,extend:M,pick:v,wrap:w}=m();!function(t){let e,i=0;function o(t){let e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,void 0,void 0,t.chartX,t.chartY)}function s(t){let o=this.chart,s=b((t=this.normalize(t)).wheelDelta)&&-t.wheelDelta/120||t.deltaY||t.detail;Math.abs(s)>=1&&(i+=Math.abs(s),e&&clearTimeout(e),e=setTimeout(()=>{i=0},50)),i<10&&o.isInsidePlot(t.chartX-o.plotLeft,t.chartY-o.plotTop)&&o.mapView&&o.mapView.zoomBy(-((o.options.mapNavigation.mouseWheelSensitivity-1)*s),void 0,[t.chartX,t.chartY],!(1>Math.abs(s))&&void 0)}function r(t,e,i){let o=this.chart;if(e=t.call(this,e,i),o&&o.mapView){let t=o.mapView.pixelsToLonLat({x:e.chartX-o.plotLeft,y:e.chartY-o.plotTop});t&&M(e,t)}return e}function a(t){let e=this.chart.options.mapNavigation;e&&v(e.enableTouchZoom,e.enabled)&&(this.chart.zooming.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}t.compose=function(t){let e=t.prototype;e.onContainerDblClick||(M(e,{onContainerDblClick:o,onContainerMouseWheel:s}),w(e,"normalize",r),w(e,"zoomOption",a))}}(n||(n={}));let P=n;function T(e,i,o,s,r){if(r){let t=r?.r||0;r.brBoxY=i-t,r.brBoxHeight=s+t}return t.roundedRect(e,i,o,s,r)}function j(e,i,o,s,r){if(r){let t=r?.r||0;r.brBoxHeight=s+t}return t.roundedRect(e,i,o,s,r)}let C=function(e){(t=e.prototype.symbols).bottombutton=T,t.topbutton=j},{setOptions:A}=m(),{composed:L}=m(),{addEvent:k,extend:B,merge:D,objectEach:S,pick:O,pushUnique:V}=m();function E(t){t&&(t.preventDefault?.(),t.stopPropagation?.(),t.cancelBubble=!0)}class z{static compose(t,e,i){P.compose(e),C(i),V(L,"Map.Navigation")&&(k(t,"beforeRender",function(){this.mapNavigation=new z(this),this.mapNavigation.update()}),A(x))}constructor(t){this.chart=t,this.navButtons=[]}update(t){let e=this,i=e.chart,o=e.navButtons,s=function(t){this.handler.call(i,t),E(t)},r=i.options.mapNavigation;for(t&&(r=i.options.mapNavigation=D(i.options.mapNavigation,t));o.length;)o.pop()?.destroy();!i.renderer.forExport&&O(r.enableButtons,r.enabled)&&(e.navButtonsGroup||(e.navButtonsGroup=i.renderer.g().attr({zIndex:7}).add()),S(r.buttons,(t,a)=>{let n={padding:(t=D(r.buttonOptions,t)).padding};!i.styledMode&&t.theme&&(B(n,t.theme),n.style=D(t.theme.style,t.style));let{text:l,width:h=0,height:p=0,padding:d=0}=t,c=i.renderer.button("+"!==l&&"-"!==l&&l||"",0,0,s,n,void 0,void 0,void 0,"zoomIn"===a?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+({zoomIn:"zoom-in",zoomOut:"zoom-out"})[a]).attr({width:h,height:p,title:i.options.lang[a],zIndex:5}).add(e.navButtonsGroup);if("+"===l||"-"===l){let e=h+1,o=[["M",d+3,d+p/2],["L",d+e-3,d+p/2]];"+"===l&&o.push(["M",d+e/2,d+3],["L",d+e/2,d+p-3]),i.renderer.path(o).addClass("highcharts-button-symbol").attr(i.styledMode?{}:{stroke:t.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(c)}if(c.handler=t.onclick,k(c.element,"dblclick",E),o.push(c),B(t,{width:c.width,height:2*(c.height||0)}),i.hasLoaded)c.align(t,!1,t.alignTo);else{let e=k(i,"load",()=>{c.element&&c.align(t,!1,t.alignTo),e()})}}),i.hasLoaded||k(i,"render",function(){let t=i.exporting?.group?.getBBox();if(t){let i=e.navButtonsGroup.getBBox();if(!(i.x>=t.x+t.width||i.x+i.width<=t.x||i.y>=t.y+t.height||i.y+i.height<=t.y)){let o=-i.y-i.height+t.y-5,s=t.y+t.height-i.y+5,a=r.buttonOptions&&r.buttonOptions.verticalAlign;e.navButtonsGroup.attr({translateY:"bottom"===a?o:s})}}})),this.updateEvents(r)}updateEvents(t){let e=this.chart;O(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||k(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),O(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||k(e.container,"wheel",function(t){if(!e.pointer.inClass(t.target,"highcharts-no-mousewheel")){let i=e.mapView?.zoom;e.pointer.onContainerMouseWheel(t),i!==e.mapView?.zoom&&E(t)}return!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}}let I=i.default.ColorMapComposition;var F=c.n(I);let X=e.default.Series;var Y=c.n(X);let{deg2rad:N}=m(),{fireEvent:G,isNumber:U,pick:Z,relativeLength:W}=m();(s=l||(l={})).getCenter=function(){let t=this.options,e=this.chart,i=2*(t.slicedOffset||0),o=e.plotWidth-2*i,s=e.plotHeight-2*i,r=t.center,a=Math.min(o,s),n=t.thickness,l,h=t.size,p=t.innerSize||0,d,c;"string"==typeof h&&(h=parseFloat(h)),"string"==typeof p&&(p=parseFloat(p));let u=[Z(r?.[0],"50%"),Z(r?.[1],"50%"),Z(h&&h<0?void 0:t.size,"100%"),Z(p&&p<0?void 0:t.innerSize||0,"0%")];for(!e.angular||this instanceof Y()||(u[3]=0),d=0;d<4;++d)c=u[d],l=d<2||2===d&&/%$/.test(c),u[d]=W(c,[o,s,a,u[2]][d])+(l?i:0);return u[3]>u[2]&&(u[3]=u[2]),U(n)&&2*n<u[2]&&n>0&&(u[3]=u[2]-2*n),G(this,"afterGetCenter",{positions:u}),u},s.getStartAndEndRadians=function(t,e){let i=U(t)?t:0,o=U(e)&&e>i&&e-i<360?e:i+360;return{start:N*(i+-90),end:N*(o+-90)}};let R=l,q=e.default.Chart;var H=c.n(q);let _=e.default.SVGRenderer;var $=c.n(_);let{getOptions:K}=m(),{isNumber:J,merge:Q,pick:tt}=m();class te extends H(){init(t,e){let i=K().credits,o=Q({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:tt(i.mapText,' \xa9 <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:tt(i.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},t);super.init(o,e)}mapZoom(t,e,i,o,s){this.mapView&&(J(t)&&(t=Math.log(t)/Math.log(.5)),this.mapView.zoomBy(t,J(e)&&J(i)?this.mapView.projection.inverse([e,i]):void 0,J(o)&&J(s)?[o,s]:void 0))}update(t){t.chart&&"map"in t.chart&&this.mapView?.recommendMapView(this,[t.chart.map,...(this.options.series||[]).map(t=>t.mapData)],!0),super.update.apply(this,arguments)}}(r=te||(te={})).maps={},r.mapChart=function(t,e,i){return new r(t,e,i)},r.splitPath=function(t){let e;return e="string"==typeof t?(t=t.replace(/([A-Z])/gi," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(t=>/[A-Z]/i.test(t)?t:parseFloat(t)):t,$().prototype.pathToSegments(e)};let ti=te,to={boundsFromPath:function(t){let e=-Number.MAX_VALUE,i=Number.MAX_VALUE,o=-Number.MAX_VALUE,s=Number.MAX_VALUE,r;if(t.forEach(t=>{let a=t[t.length-2],n=t[t.length-1];"number"==typeof a&&"number"==typeof n&&(i=Math.min(i,a),e=Math.max(e,a),s=Math.min(s,n),o=Math.max(o,n),r=!0)}),r)return{x1:i,y1:s,x2:e,y2:o}}},ts=e.default.SeriesRegistry;var tr=c.n(ts);let{boundsFromPath:ta}=to,tn=tr().seriesTypes.scatter.prototype.pointClass,{extend:tl,isNumber:th,pick:tp}=m();class td extends tn{static getProjectedPath(t,e){return t.projectedPath||(e&&t.geometry?(e.hasCoordinates=!0,t.projectedPath=e.path(t.geometry)):t.projectedPath=t.path),t.projectedPath||[]}applyOptions(t,e){let i=this.series,o=super.applyOptions(t,e),s=i.joinBy;if(i.mapData&&i.mapMap){let t=s[1],e=super.getNestedProperty(t),r=void 0!==e&&i.mapMap[e];r?tl(o,{...r,name:o.name??r.name}):-1!==i.pointArrayMap.indexOf("value")&&(o.value=o.value||null)}return o}getProjectedBounds(t){let e=ta(td.getProjectedPath(this,t)),i=this.properties,o=this.series.chart.mapView;if(e){let s=i?.["hc-middle-lon"],r=i?.["hc-middle-lat"];if(o&&th(s)&&th(r)){let i=t.forward([s,r]);e.midX=i[0],e.midY=i[1]}else{let t=i?.["hc-middle-x"],o=i?.["hc-middle-y"];e.midX=e.x1+(e.x2-e.x1)*tp(this.middleX,th(t)?t:.5);let s=tp(this.middleY,th(o)?o:.5);this.geometry||(s=1-s),e.midY=e.y2-(e.y2-e.y1)*s}return e}}onMouseOver(t){m().clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,t):this.series.onMouseOut()}setVisible(t){this.visible=this.options.visible=!!t,this.dataLabel&&this.dataLabel[t?"show":"hide"](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(t){let e=this.series.chart,i=e.mapView,o=this.bounds;if(i&&o){let s=th(this.insetIndex)&&i.insets[this.insetIndex];if(s){let t=s.projectedUnitsToPixels({x:o.x1,y:o.y1}),e=s.projectedUnitsToPixels({x:o.x2,y:o.y2}),r=i.pixelsToProjectedUnits({x:t.x,y:t.y}),a=i.pixelsToProjectedUnits({x:e.x,y:e.y});o={x1:r.x,y1:r.y,x2:a.x,y2:a.y}}i.fitToBounds(o,void 0,!1),this.series.isDirty=!0,e.redraw(t)}}}tl(td.prototype,{dataLabelOnNull:F().pointMembers.dataLabelOnNull,moveToTopOnHover:F().pointMembers.moveToTopOnHover,isValid:F().pointMembers.isValid});let{isNumber:tc}=m(),tu={center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}},tm=e.default.Templating;var tg=c.n(tm);let{win:tf}=m(),{format:ty}=tg(),{error:tx,extend:tb,merge:tM,wrap:tv}=m();!function(t){function e(t){return this.mapView?.lonLatToProjectedUnits(t)}function i(t){return this.mapView?.projectedUnitsToLonLat(t)}function o(t,e){let i=this.options.chart.proj4||tf.proj4;if(!i)return void tx(21,!1,this);let{jsonmarginX:o=0,jsonmarginY:s=0,jsonres:r=1,scale:a=1,xoffset:n=0,xpan:l=0,yoffset:h=0,ypan:p=0}=e,d=i(e.crs,[t.lon,t.lat]),c=e.cosAngle||e.rotation&&Math.cos(e.rotation),u=e.sinAngle||e.rotation&&Math.sin(e.rotation),m=e.rotation?[d[0]*c+d[1]*u,-d[0]*u+d[1]*c]:d;return{x:((m[0]-n)*a+l)*r+o,y:-(((h-m[1])*a+p)*r-s)}}function s(t,e){let i=this.options.chart.proj4||tf.proj4;if(!i)return void tx(21,!1,this);if(null===t.y)return;let{jsonmarginX:o=0,jsonmarginY:s=0,jsonres:r=1,scale:a=1,xoffset:n=0,xpan:l=0,yoffset:h=0,ypan:p=0}=e,d={x:((t.x-o)/r-l)/a+n,y:((t.y-s)/r+p)/a+h},c=e.cosAngle||e.rotation&&Math.cos(e.rotation),u=e.sinAngle||e.rotation&&Math.sin(e.rotation),m=i(e.crs,"WGS84",e.rotation?{x:d.x*c+-(d.y*u),y:d.x*u+d.y*c}:d);return{lat:m.y,lon:m.x}}function r(t,e){e||(e=Object.keys(t.objects)[0]);let i=t.objects[e];if(i["hc-decoded-geojson"]&&i["hc-decoded-geojson"].title===t.title)return i["hc-decoded-geojson"];let o=t.arcs;if(t.transform){let e,i,s,r=t.arcs,{scale:a,translate:n}=t.transform;o=[];for(let t=0,l=r.length;t<l;++t){let l=r[t];o.push(e=[]),i=0,s=0;for(let t=0,o=l.length;t<o;++t)e.push([(i+=l[t][0])*a[0]+n[0],(s+=l[t][1])*a[1]+n[1]])}}let s=t=>"number"==typeof t[0]?t.reduce((t,e,i)=>{let s=e<0?o[~e]:o[e];return e<0?(s=s.slice(0,0===i?s.length:s.length-1)).reverse():i&&(s=s.slice(1)),t.concat(s)},[]):t.map(s),r=i.geometries,a=[];for(let t=0,e=r.length;t<e;++t)a.push({type:"Feature",properties:r[t].properties,geometry:{type:r[t].type,coordinates:r[t].coordinates||s(r[t].arcs)}});let n={type:"FeatureCollection",copyright:t.copyright,copyrightShort:t.copyrightShort,copyrightUrl:t.copyrightUrl,features:a,"hc-recommended-mapview":i["hc-recommended-mapview"],bbox:t.bbox,title:t.title};return i["hc-decoded-geojson"]=n,n}function a(t,e){e=tM(!0,this.options.credits,e),t.call(this,e),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}t.compose=function(t){let r=t.prototype;r.transformFromLatLon||(r.fromLatLonToPoint=e,r.fromPointToLatLon=i,r.transformFromLatLon=o,r.transformToLatLon=s,tv(r,"addCredits",a))},t.geojson=function(t,e="map",i){let o=[],s="Topology"===t.type?r(t):t,a=s.features;for(let t=0,i=a.length;t<i;++t){let i,s=a[t],r=s.geometry||{},n=r.type,l=r.coordinates,h=s.properties;if(("map"===e||"mapbubble"===e)&&("Polygon"===n||"MultiPolygon"===n)||"mapline"===e&&("LineString"===n||"MultiLineString"===n)?l.length&&(i={geometry:{coordinates:l,type:n}}):"mappoint"===e&&"Point"===n&&l.length&&(i={geometry:{coordinates:l,type:n}}),i){let t=h&&(h.name||h.NAME),e=h&&h.lon,s=h&&h.lat;o.push(tb(i,{lat:"number"==typeof s?s:void 0,lon:"number"==typeof e?e:void 0,name:"string"==typeof t?t:void 0,properties:h}))}}return i&&s.copyrightShort&&(i.chart.mapCredits=ty(i.chart.options.credits?.mapText,{geojson:s}),i.chart.mapCreditsFull=ty(i.chart.options.credits?.mapTextFull,{geojson:s})),o},t.topo2geo=r}(h||(h={}));let tw=h;(a=p||(p={})).getCenterOfPoints=function(t){let e=t.reduce((t,e)=>(t.x+=e.x,t.y+=e.y,t),{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}},a.getDistanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},a.getAngleBetweenPoints=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},a.pointInPolygon=function({x:t,y:e},i){let o=i.length,s,r,a=!1;for(s=0,r=o-1;s<o;r=s++){let[o,n]=i[s],[l,h]=i[r];n>e!=h>e&&t<(l-o)*(e-n)/(h-n)+o&&(a=!a)}return a};let tP=p;function tT(t,e,i=!0){let o=e[e.length-1],s,r,a,n=t;for(let t=0;t<e.length;t++){let l=n;s=e[t],n=[],r=i?l[l.length-1]:l[0];for(let t=0;t<l.length;t++)tj(o,s,a=l[t])?(tj(o,s,r)||n.push(tC(o,s,r,a)),n.push(a)):tj(o,s,r)&&n.push(tC(o,s,r,a)),r=a;o=s}return n}function tj(t,e,i){return(e[0]-t[0])*(i[1]-t[1])>(e[1]-t[1])*(i[0]-t[0])}function tC(t,e,i,o){let s=[t[0]-e[0],t[1]-e[1]],r=[i[0]-o[0],i[1]-o[1]],a=t[0]*e[1]-t[1]*e[0],n=i[0]*o[1]-i[1]*o[0],l=1/(s[0]*r[1]-s[1]*r[0]),h=[(a*r[0]-n*s[0])*l,(a*r[1]-n*s[1])*l];return h.isIntersection=!0,h}let tA=Math.sign||(t=>0===t?0:t>0?1:-1),tL=Math.PI/180,tk=Math.PI/2,tB=t=>Math.tan((tk+t)/2),tD=class{constructor(t){let e=(t.parallels||[]).map(t=>t*tL),i=e[0]||0,o=e[1]??i,s=Math.cos(i);"object"==typeof t.projectedBounds&&(this.projectedBounds=t.projectedBounds);let r=i===o?Math.sin(i):Math.log(s/Math.cos(o))/Math.log(tB(o)/tB(i));1e-10>Math.abs(r)&&(r=1e-10*(tA(r)||1)),this.n=r,this.c=s*Math.pow(tB(i),r)/r}forward(t){let{c:e,n:i,projectedBounds:o}=this,s=t[0]*tL,r=t[1]*tL;e>0?r<-tk+1e-6&&(r=-tk+1e-6):r>tk-1e-6&&(r=tk-1e-6);let a=e/Math.pow(tB(r),i),n=a*Math.sin(i*s)*63.78137,l=(e-a*Math.cos(i*s))*63.78137,h=[n,l];return o&&(n<o.x1||n>o.x2||l<o.y1||l>o.y2)&&(h.outside=!0),h}inverse(t){let{c:e,n:i}=this,o=t[0]/63.78137,s=e-t[1]/63.78137,r=tA(i)*Math.sqrt(o*o+s*s),a=Math.atan2(o,Math.abs(s))*tA(s);return s*i<0&&(a-=Math.PI*tA(o)*tA(s)),[a/i/tL,(2*Math.atan(Math.pow(e/r,1/i))-tk)/tL]}},tS=Math.sqrt(3)/2,tO=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(t){let e=Math.PI/180,i=Math.asin(tS*Math.sin(t[1]*e)),o=i*i,s=o*o*o;return[t[0]*e*Math.cos(i)*74.03120656864502/(tS*(1.340264+-.24331799999999998*o+s*(.0062510000000000005+.034164*o))),74.03120656864502*i*(1.340264+-.081106*o+s*(893e-6+.003796*o))]}inverse(t){let e=t[0]/74.03120656864502,i=t[1]/74.03120656864502,o=180/Math.PI,s=i,r,a,n,l;for(let t=0;t<12&&(a=(r=s*s)*r*r,n=s*(1.340264+-.081106*r+a*(893e-6+.003796*r))-i,s-=l=n/(1.340264+-.24331799999999998*r+a*(.0062510000000000005+.034164*r)),!(1e-9>Math.abs(l)));++t);a=(r=s*s)*r*r;let h=o*tS*e*(1.340264+-.24331799999999998*r+a*(.0062510000000000005+.034164*r))/Math.cos(s),p=o*Math.asin(Math.sin(s)/tS);return Math.abs(h)>180?[NaN,NaN]:[h,p]}},tV=Math.PI/4,tE=Math.PI/180,tz=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(t){return[t[0]*tE*63.78137,79.7267125*Math.log(Math.tan(tV+.4*t[1]*tE))]}inverse(t){return[t[0]/63.78137/tE,2.5*(Math.atan(Math.exp(.8*(t[1]/63.78137)))-tV)/tE]}},tI=Math.PI/180,tF=class{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}forward(t){let e=t[0],i=t[1]*tI,o=[Math.cos(i)*Math.sin(e*tI)*63.78460826781007,63.78460826781007*Math.sin(i)];return(e<-90||e>90)&&(o.outside=!0),o}inverse(t){let e=t[0]/63.78460826781007,i=t[1]/63.78460826781007,o=Math.sqrt(e*e+i*i),s=Math.asin(o),r=Math.sin(s);return[Math.atan2(e*r,o*Math.cos(s))/tI,Math.asin(o&&i*r/o)/tI]}},tX=Math.PI/180,tY=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(t){let e=Math.sin(t[1]*tX),i=[63.78137*t[0]*tX,63.78137*Math.log((1+e)/(1-e))/2];return Math.abs(t[1])>this.maxLatitude&&(i.outside=!0),i}inverse(t){return[t[0]/(63.78137*tX),(2*Math.atan(Math.exp(t[1]/63.78137))-Math.PI/2)/tX]}},{clipLineString:tN,clipPolygon:tG}={clipLineString:function(t,e){let i=[],o=tT(t,e,!1);for(let t=1;t<o.length;t++)o[t].isIntersection&&o[t-1].isIntersection&&(i.push(o.splice(0,t)),t=0),t===o.length-1&&i.push(o);return i},clipPolygon:tT},{clamp:tU,erase:tZ}=m(),tW=2*Math.PI/360,tR=t=>(t<-180&&(t+=360),t>180&&(t-=360),t),tq=t=>(1-Math.cos(t))/2;class tH{static add(t,e){tH.registry[t]=e}static distance(t,e){let{atan2:i,sqrt:o}=Math,s=((t,e)=>{let i=Math.cos,o=t[1]*tW,s=t[0]*tW,r=e[1]*tW,a=e[0]*tW;return tq(r-o)+i(o)*i(r)*tq(a-s)})(t,e);return 6371e3*(2*i(o(s),o(1-s)))}static geodesic(t,e,i,o=5e5){let{atan2:s,cos:r,sin:a,sqrt:n}=Math,l=tH.distance,h=t[1]*tW,p=t[0]*tW,d=e[1]*tW,c=e[0]*tW,u=r(h)*r(p),m=r(d)*r(c),g=r(h)*a(p),f=r(d)*a(c),y=a(h),x=a(d),b=l(t,e),M=b/6371e3,v=a(M),w=Math.round(b/o),P=[];if(i&&P.push(t),w>1){let t=1/w;for(let e=t;e<.999;e+=t){let t=a((1-e)*M)/v,i=a(e*M)/v,o=t*u+i*m,r=t*g+i*f,l=s(t*y+i*x,n(o*o+r*r)),h=s(r,o);P.push([h/tW,l/tW])}}return i&&P.push(e),P}static insertGeodesics(t){let e=t.length-1;for(;e--;)if(Math.max(Math.abs(t[e][0]-t[e+1][0]),Math.abs(t[e][1]-t[e+1][1]))>10){let i=tH.geodesic(t[e],t[e+1]);i.length&&t.splice(e+1,0,...i)}}static toString(t){let{name:e,rotation:i}=t||{};return[e,i&&i.join(",")].join(";")}constructor(t={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90,this.options=t;let{name:e,projectedBounds:i,rotation:o}=t;this.rotator=o?this.getRotator(o):void 0;let s=e?tH.registry[e]:void 0;s&&(this.def=new s(t));let{def:r,rotator:a}=this;r&&(this.maxLatitude=r.maxLatitude||90,this.hasGeoProjection=!0),a&&r?(this.forward=t=>r.forward(a.forward(t)),this.inverse=t=>a.inverse(r.inverse(t))):r?(this.forward=t=>r.forward(t),this.inverse=t=>r.inverse(t)):a&&(this.forward=a.forward,this.inverse=a.inverse),this.bounds="world"===i?r&&r.bounds:i}lineIntersectsBounds(t){let{x1:e,x2:i,y1:o,y2:s}=this.bounds||{},r=(t,e,i)=>{let[o,s]=t,r=+!e;if("number"==typeof i&&o[e]>=i!=s[e]>=i){let t=(i-o[e])/(s[e]-o[e]),a=o[r]+t*(s[r]-o[r]);return e?[a,i]:[i,a]}},a,n=t[0];return(a=r(t,0,e))?(n=a,t[1]=a):(a=r(t,0,i))&&(n=a,t[1]=a),(a=r(t,1,o))?n=a:(a=r(t,1,s))&&(n=a),n}getRotator(t){let e=t[0]*tW,i=(t[1]||0)*tW,o=(t[2]||0)*tW,s=Math.cos(i),r=Math.sin(i),a=Math.cos(o),n=Math.sin(o);if(0!==e||0!==i||0!==o)return{forward:t=>{let i=t[0]*tW+e,o=t[1]*tW,l=Math.cos(o),h=Math.cos(i)*l,p=Math.sin(i)*l,d=Math.sin(o),c=d*s+h*r;return[Math.atan2(p*a-c*n,h*s-d*r)/tW,Math.asin(c*a+p*n)/tW]},inverse:t=>{let i=t[0]*tW,o=t[1]*tW,l=Math.cos(o),h=Math.cos(i)*l,p=Math.sin(i)*l,d=Math.sin(o),c=d*a-p*n;return[(Math.atan2(p*a+d*n,h*s+c*r)-e)/tW,Math.asin(c*s-h*r)/tW]}}}forward(t){return t}inverse(t){return t}cutOnAntimeridian(t,e){let i,o=[],s=[t];for(let i=0,s=t.length;i<s;++i){let s=t[i],r=t[i-1];if(!i){if(!e)continue;r=t[t.length-1]}let a=r[0],n=s[0];if((a<-90||a>90)&&(n<-90||n>90)&&a>0!=n>0){let t=tU((180-(a+360)%360)/((n+360)%360-(a+360)%360),0,1),e=r[1]+t*(s[1]-r[1]);o.push({i,lat:e,direction:a<0?1:-1,previousLonLat:r,lonLat:s})}}if(o.length)if(e){o.length%2==1&&(i=o.slice().sort((t,e)=>Math.abs(e.lat)-Math.abs(t.lat))[0],tZ(o,i));let e=o.length-2;for(;e>=0;){let i=o[e].i,r=tR(180+1e-6*o[e].direction),a=tR(180-1e-6*o[e].direction),n=t.splice(i,o[e+1].i-i,...tH.geodesic([r,o[e].lat],[r,o[e+1].lat],!0));n.push(...tH.geodesic([a,o[e+1].lat],[a,o[e].lat],!0)),s.push(n),e-=2}if(i)for(let t=0;t<s.length;t++){let{direction:e,lat:o}=i,r=s[t],a=r.indexOf(i.lonLat);if(a>-1){let t=(o<0?-1:1)*this.maxLatitude,s=tR(180+1e-6*e),n=tR(180-1e-6*e),l=tH.geodesic([s,o],[s,t],!0);for(let i=s+120*e;i>-180&&i<180;i+=120*e)l.push([i,t]);l.push(...tH.geodesic([n,t],[n,i.lat],!0)),r.splice(a,0,...l);break}}}else{let e=o.length;for(;e--;){let i=o[e].i,r=t.splice(i,t.length,[tR(180+1e-6*o[e].direction),o[e].lat]);r.unshift([tR(180-1e-6*o[e].direction),o[e].lat]),s.push(r)}}return s}path(t){let e,{bounds:i,def:o,rotator:s}=this,r=[],a="Polygon"===t.type||"MultiPolygon"===t.type,n=this.hasGeoProjection,l=!o||!1!==o.antimeridianCutting,h=l?s:void 0,p=l&&o||this;i&&(e=[[i.x1,i.y1],[i.x2,i.y1],[i.x2,i.y2],[i.x1,i.y2]]);let d=t=>{let o=t.map(t=>{if(l){h&&(t=h.forward(t));let e=t[0];1e-6>Math.abs(e-180)&&(e=e<180?179.999999:180.000001),t=[e,t[1]]}return t}),s=[o];n&&(tH.insertGeodesics(o),l&&(s=this.cutOnAntimeridian(o,a))),s.forEach(t=>{let o,s;if(t.length<2)return;let h=!1,d=!1,c=t=>{h?r.push(["L",t[0],t[1]]):(r.push(["M",t[0],t[1]]),h=!0)},u=!1,m=!1,g=t.map(t=>{let e=p.forward(t);return e.outside?u=!0:m=!0,e[1]===1/0?e[1]=1e10:e[1]===-1/0&&(e[1]=-1e10),e});if(l){if(a&&g.push(g[0]),u){if(!m)return;if(e){if(a)g=tG(g,e);else if(i)return void tN(g,e).forEach(t=>{h=!1,t.forEach(c)})}}g.forEach(c)}else for(let e=0;e<g.length;e++){let i=t[e],r=g[e];r.outside?d=!0:(a&&!o&&(o=i,t.push(i),g.push(r)),d&&s&&(a&&n?tH.geodesic(s,i).forEach(t=>c(p.forward(t))):h=!1),c(r),s=i,d=!1)}})};return"LineString"===t.type?d(t.coordinates):"MultiLineString"===t.type?t.coordinates.forEach(t=>d(t)):"Polygon"===t.type?(t.coordinates.forEach(t=>d(t)),r.length&&r.push(["Z"])):"MultiPolygon"===t.type&&(t.coordinates.forEach(t=>{t.forEach(t=>d(t))}),r.length&&r.push(["Z"])),r}}tH.registry={EqualEarth:tO,LambertConformalConic:tD,Miller:tz,Orthographic:tF,WebMercator:tY};let{composed:t_}=m(),{pointInPolygon:t$}=tP,{topo2geo:tK}=tw,{boundsFromPath:tJ}=to,{addEvent:tQ,clamp:t0,crisp:t1,fireEvent:t2,isArray:t3,isNumber:t6,isObject:t8,isString:t7,merge:t9,pick:t4,pushUnique:t5,relativeLength:et}=m(),ee={};function ei(t,e){let{width:i,height:o}=e;return Math.log(400.979322/Math.max((t.x2-t.x1)/(i/256),(t.y2-t.y1)/(o/256)))/Math.log(2)}function eo(t){t.seriesOptions.mapData&&this.mapView?.recommendMapView(this,[this.options.chart.map,t.seriesOptions.mapData],this.options.drilldown?.mapZooming)}class es{static compose(t){t5(t_,"MapView")&&(ee=t.maps,tQ(t,"afterInit",function(){this.mapView=new es(this,this.options.mapView)},{order:0}),tQ(t,"addSeriesAsDrilldown",eo),tQ(t,"afterDrillUp",eo))}static compositeBounds(t){if(t.length)return t.slice(1).reduce((t,e)=>(t.x1=Math.min(t.x1,e.x1),t.y1=Math.min(t.y1,e.y1),t.x2=Math.max(t.x2,e.x2),t.y2=Math.max(t.y2,e.y2),t),t9(t[0]))}static mergeInsets(t,e){let i=t=>{let e={};return t.forEach((t,i)=>{e[t&&t.id||`i${i}`]=t}),e},o=t9(i(t),i(e));return Object.keys(o).map(t=>o[t])}constructor(t,e){this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],this.recommendedMapView={},this instanceof er||this.recommendMapView(t,[t.options.chart.map,...(t.options.series||[]).map(t=>t.mapData)]),this.userOptions=e||{};let i=t9(tu,this.recommendedMapView,e),o=this.recommendedMapView?.insets,s=e&&e.insets;o&&s&&(i.insets=es.mergeInsets(o,s)),this.chart=t,this.center=i.center,this.options=i,this.projection=new tH(i.projection),this.playingField=t.plotBox,this.zoom=i.zoom||0,this.minZoom=i.minZoom,this.createInsets(),this.eventsToUnbind.push(tQ(t,"afterSetChartSize",()=>{this.playingField=this.getField(),(void 0===this.minZoom||this.minZoom===this.zoom)&&(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&t6(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&t9(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){let t=this.options,e=t.insets;e&&e.forEach(e=>{let i=new er(this,t9(t.insetOptions,e));this.insets.push(i)})}fitToBounds(t,e,i=!0,o){let s=t||this.getProjectedBounds();if(s){let r=t4(e,t?0:this.options.padding),a=this.getField(!1),n=t3(r)?r:[r,r,r,r];this.padding=[et(n[0],a.height),et(n[1],a.width),et(n[2],a.height),et(n[3],a.width)],this.playingField=this.getField();let l=ei(s,this.playingField);t||(this.minZoom=l);let h=this.projection.inverse([(s.x2+s.x1)/2,(s.y2+s.y1)/2]);this.setView(h,l,i,o)}}getField(t=!0){let e=t?this.padding:[0,0,0,0];return{x:e[3],y:e[0],width:this.chart.plotWidth-e[1]-e[3],height:this.chart.plotHeight-e[0]-e[2]}}getGeoMap(t){if(t7(t))return ee[t]&&"Topology"===ee[t].type?tK(ee[t]):ee[t];if(t8(t,!0)){if("FeatureCollection"===t.type)return t;if("Topology"===t.type)return tK(t)}}getMapBBox(){let t=this.getProjectedBounds(),e=this.getScale();if(t){let i=this.padding,o=this.projectedUnitsToPixels({x:t.x1,y:t.y2});return{width:(t.x2-t.x1)*e+i[1]+i[3],height:(t.y2-t.y1)*e+i[0]+i[2],x:o.x-i[3],y:o.y-i[0]}}}getProjectedBounds(){let t=this.projection,e=this.chart.series.reduce((t,e)=>{let i=e.getProjectedBounds&&e.getProjectedBounds();return i&&!1!==e.options.affectsMapView&&t.push(i),t},[]),i=this.options.fitToGeometry;if(i){if(!this.fitToGeometryCache)if("MultiPoint"===i.type){let e=i.coordinates.map(e=>t.forward(e)),o=e.map(t=>t[0]),s=e.map(t=>t[1]);this.fitToGeometryCache={x1:Math.min.apply(0,o),x2:Math.max.apply(0,o),y1:Math.min.apply(0,s),y2:Math.max.apply(0,s)}}else this.fitToGeometryCache=tJ(t.path(i));return this.fitToGeometryCache}return this.projection.bounds||es.compositeBounds(e)}getScale(){return 256/400.979322*Math.pow(2,this.zoom)}getSVGTransform(){let{x:t,y:e,width:i,height:o}=this.playingField,s=this.projection.forward(this.center),r=this.projection.hasCoordinates?-1:1,a=this.getScale(),n=a*r,l=t+i/2-s[0]*a,h=e+o/2-s[1]*n;return{scaleX:a,scaleY:n,translateX:l,translateY:h}}lonLatToPixels(t){let e=this.lonLatToProjectedUnits(t);if(e)return this.projectedUnitsToPixels(e)}lonLatToProjectedUnits(t){let e=this.chart,i=e.mapTransforms;if(i){for(let o in i)if(Object.hasOwnProperty.call(i,o)&&i[o].hitZone){let s=e.transformFromLatLon(t,i[o]);if(s&&t$(s,i[o].hitZone.coordinates[0]))return s}return e.transformFromLatLon(t,i.default)}for(let e of this.insets)if(e.options.geoBounds&&t$({x:t.lon,y:t.lat},e.options.geoBounds.coordinates[0])){let i=e.projection.forward([t.lon,t.lat]),o=e.projectedUnitsToPixels({x:i[0],y:i[1]});return this.pixelsToProjectedUnits(o)}let o=this.projection.forward([t.lon,t.lat]);if(!o.outside)return{x:o[0],y:o[1]}}pixelsToLonLat(t){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(t))}pixelsToProjectedUnits(t){let{x:e,y:i}=t,o=this.getScale(),s=this.projection.forward(this.center),r=this.playingField,a=r.x+r.width/2,n=r.y+r.height/2;return{x:s[0]+(e-a)/o,y:s[1]-(i-n)/o}}projectedUnitsToLonLat(t){let e=this.chart,i=e.mapTransforms;if(i){for(let o in i)if(Object.hasOwnProperty.call(i,o)&&i[o].hitZone&&t$(t,i[o].hitZone.coordinates[0]))return e.transformToLatLon(t,i[o]);return e.transformToLatLon(t,i.default)}let o=this.projectedUnitsToPixels(t);for(let t of this.insets)if(t.hitZone&&t$(o,t.hitZone.coordinates[0])){let e=t.pixelsToProjectedUnits(o),i=t.projection.inverse([e.x,e.y]);return{lon:i[0],lat:i[1]}}let s=this.projection.inverse([t.x,t.y]);return{lon:s[0],lat:s[1]}}projectedUnitsToPixels(t){let e=this.getScale(),i=this.projection.forward(this.center),o=this.playingField,s=o.x+o.width/2,r=o.y+o.height/2;return{x:s-e*(i[0]-t.x),y:r+e*(i[1]-t.y)}}recommendMapView(t,e,i=!1){this.recommendedMapView={};let o=e.map(t=>this.getGeoMap(t)),s=[];o.forEach(t=>{if(t&&(Object.keys(this.recommendedMapView).length||(this.recommendedMapView=t["hc-recommended-mapview"]||{}),t.bbox)){let[e,i,o,r]=t.bbox;s.push({x1:e,y1:i,x2:o,y2:r})}});let r=s.length&&es.compositeBounds(s);t2(this,"onRecommendMapView",{geoBounds:r,chart:t},function(){if(r&&this.recommendedMapView){if(!this.recommendedMapView.projection){let{x1:t,y1:e,x2:i,y2:o}=r;this.recommendedMapView.projection=i-t>180&&o-e>90?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[e,o],rotation:[-(t+i)/2]}}this.recommendedMapView.insets||(this.recommendedMapView.insets=void 0)}}),this.geoMap=o[0],i&&t.hasRendered&&!t.userOptions.mapView?.projection&&this.recommendedMapView&&this.update(this.recommendedMapView)}redraw(t){this.chart.series.forEach(t=>{t.useMapGeometry&&(t.isDirty=!0)}),this.chart.redraw(t)}setView(t,e,i=!0,o){t&&(this.center=t),"number"==typeof e&&("number"==typeof this.minZoom&&(e=Math.max(e,this.minZoom)),"number"==typeof this.options.maxZoom&&(e=Math.min(e,this.options.maxZoom)),t6(e)&&(this.zoom=e));let s=this.getProjectedBounds();if(s){let t=this.projection.forward(this.center),{x:e,y:i,width:o,height:r}=this.playingField,a=this.getScale(),n=this.projectedUnitsToPixels({x:s.x1,y:s.y1}),l=this.projectedUnitsToPixels({x:s.x2,y:s.y2}),h=[(s.x1+s.x2)/2,(s.y1+s.y2)/2];if(!this.chart.series.some(t=>t.isDrilling)){let s=n.x,p=l.y,d=l.x,c=n.y;d-s<o?t[0]=h[0]:s<e&&d<e+o?t[0]+=Math.max(s-e,d-o-e)/a:d>e+o&&s>e&&(t[0]+=Math.min(d-o-e,s-e)/a),c-p<r?t[1]=h[1]:p<i&&c<i+r?t[1]-=Math.max(p-i,c-r-i)/a:c>i+r&&p>i&&(t[1]-=Math.min(c-r-i,p-i)/a),this.center=this.projection.inverse(t)}this.insets.forEach(t=>{t.options.field&&(t.hitZone=t.getHitZone(),t.playingField=t.getField())}),this.render()}t2(this,"afterSetView"),i&&this.redraw(o)}setUpEvents(){let t,e,i,{chart:o}=this,s=s=>{let{lastTouches:r,pinchDown:a}=o.pointer,n=this.projection,l=s.touches,{mouseDownX:h,mouseDownY:p}=o,d=0;if(a?.length===1?(h=a[0].chartX,p=a[0].chartY):a?.length===2&&(h=(a[0].chartX+a[1].chartX)/2,p=(a[0].chartY+a[1].chartY)/2),l?.length===2&&r&&(d=Math.log(Math.sqrt(Math.pow(r[0].chartX-r[1].chartX,2)+Math.pow(r[0].chartY-r[1].chartY,2))/Math.sqrt(Math.pow(l[0].chartX-l[1].chartX,2)+Math.pow(l[0].chartY-l[1].chartY,2)))/Math.log(.5)),t6(h)&&t6(p)){let r=`${h},${p}`,{chartX:a,chartY:c}=s.originalEvent;l?.length===2&&(a=(l[0].chartX+l[1].chartX)/2,c=(l[0].chartY+l[1].chartY)/2),r!==e&&(e=r,t=this.projection.forward(this.center),i=(this.projection.options.rotation||[0,0]).slice());let u=n.def&&n.def.bounds,m=u&&ei(u,this.playingField)||-1/0;if("Orthographic"===n.options.name&&2>(l?.length||0)&&(this.minZoom||1/0)<1.3*m){let t=440/(this.getScale()*Math.min(o.plotWidth,o.plotHeight));if(i){let e=(h-a)*t-i[0],s=t0(-i[1]-(p-c)*t,-80,80),r=this.zoom;this.update({projection:{rotation:[-e,-s]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=r,o.redraw(!1)}}else if(t6(a)&&t6(c)){let e=this.getScale(),i=this.projection.hasCoordinates?1:-1,o=this.projection.inverse([t[0]+(h-a)/e,t[1]-(p-c)/e*i]);isNaN(o[0]+o[1])||this.zoomBy(d,o,void 0,!1)}s.preventDefault()}};tQ(o,"pan",s),tQ(o,"touchpan",s),tQ(o,"selection",t=>{if(t.resetSelection)this.zoomBy();else{let e=t.x-o.plotLeft,i=t.y-o.plotTop,{y:s,x:r}=this.pixelsToProjectedUnits({x:e,y:i}),{y:a,x:n}=this.pixelsToProjectedUnits({x:e+t.width,y:i+t.height});this.fitToBounds({x1:r,y1:s,x2:n,y2:a},void 0,!0,!t.originalEvent.touches&&void 0),/^touch/.test(t.originalEvent.type)||o.showResetZoom(),t.preventDefault()}})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(t,e=!0,i){let o=t.projection,s=o&&tH.toString(o)!==tH.toString(this.options.projection),r=!1;t9(!0,this.userOptions,t),t9(!0,this.options,t),"insets"in t&&(this.insets.forEach(t=>t.destroy()),this.insets.length=0,r=!0),(s||"fitToGeometry"in t)&&delete this.fitToGeometryCache,(s||r)&&(this.chart.series.forEach(t=>{let e=t.transformGroups;if(t.clearBounds&&t.clearBounds(),t.isDirty=!0,t.isDirtyData=!0,r&&e)for(;e.length>1;){let t=e.pop();t&&t.destroy()}}),s&&(this.projection=new tH(this.options.projection)),r&&this.createInsets(),!t.center&&Object.hasOwnProperty.call(t,"zoom")&&!t6(t.zoom)&&this.fitToBounds(void 0,void 0,!1)),t.center||t6(t.zoom)?this.setView(this.options.center,t.zoom,!1):"fitToGeometry"in t&&this.fitToBounds(void 0,void 0,!1),e&&this.chart.redraw(i)}zoomBy(t,e,i,o){let s=this.chart,r=this.projection.forward(this.center);if("number"==typeof t){let a,n,l,h=this.zoom+t;if(i){let[t,e]=i,o=this.getScale(),a=t-s.plotLeft-s.plotWidth/2,h=e-s.plotTop-s.plotHeight/2;n=r[0]+a/o,l=r[1]+h/o}if("number"==typeof n&&"number"==typeof l){let t=1-Math.pow(2,this.zoom)/Math.pow(2,h),e=r[0]-n,i=r[1]-l;r[0]-=e*t,r[1]+=i*t,a=this.projection.inverse(r)}this.setView(e||a,h,void 0,o)}else this.fitToBounds(void 0,void 0,void 0,o)}}class er extends es{constructor(t,e){if(super(t.chart,e),this.id=e.id,this.mapView=t,this.options=t9({center:[0,0]},t.options.insetOptions,e),this.allBounds=[],this.options.geoBounds){let e=t.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=tJ(e),this.geoBoundsProjectedPolygon=e.map(t=>[t[1]||0,t[2]||0])}}getField(t=!0){let e=this.hitZone;if(e){let i=t?this.padding:[0,0,0,0],o=e.coordinates[0],s=o.map(t=>t[0]),r=o.map(t=>t[1]),a=Math.min.apply(0,s)+i[3],n=Math.max.apply(0,s)-i[1],l=Math.min.apply(0,r)+i[0],h=Math.max.apply(0,r)-i[2];if(t6(a)&&t6(l))return{x:a,y:l,width:n-a,height:h-l}}return super.getField.call(this,t)}getHitZone(){let{chart:t,mapView:e,options:i}=this,{coordinates:o}=i.field||{};if(o){let s=o[0];if("percent"===i.units){let o="mapBoundingBox"===i.relativeTo&&e.getMapBBox()||t9(t.plotBox,{x:0,y:0});s=s.map(t=>[et(`${t[0]}%`,o.width,o.x),et(`${t[1]}%`,o.height,o.y)])}return{type:"Polygon",coordinates:[s]}}}getProjectedBounds(){return es.compositeBounds(this.allBounds)}isInside(t){let{geoBoundsProjectedBox:e,geoBoundsProjectedPolygon:i}=this;return!!(e&&t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2&&i&&t$(t,i))}render(){let{chart:t,mapView:e,options:i}=this,o=i.borderPath||i.field;if(o&&e.group){let s=!0;this.border||(this.border=t.renderer.path().addClass("highcharts-mapview-inset-border").add(e.group),s=!1),t.styledMode||this.border.attr({stroke:i.borderColor,"stroke-width":i.borderWidth});let r=this.border.strokeWidth(),a="mapBoundingBox"===i.relativeTo&&e.getMapBBox()||e.playingField,n=(o.coordinates||[]).reduce((e,o)=>o.reduce((e,o,s)=>{let[n,l]=o;return"percent"===i.units&&(n=t.plotLeft+et(`${n}%`,a.width,a.x),l=t.plotTop+et(`${l}%`,a.height,a.y)),n=t1(n,r),l=t1(l,r),e.push(0===s?["M",n,l]:["L",n,l]),e},e),[]);this.border[s?"animate":"attr"]({d:n})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(t=>t())}setUpEvents(){}}let{animObject:ea,stop:en}=m(),{noop:el}=m(),{splitPath:eh}=ti,{column:ep,scatter:ed}=tr().seriesTypes,{extend:ec,find:eu,fireEvent:em,getNestedProperty:eg,isArray:ef,defined:ey,isNumber:ex,isObject:eb,merge:eM,objectEach:ev,pick:ew,splat:eP}=m();class eT extends ed{constructor(){super(...arguments),this.processedData=[]}animate(t){let{chart:e,group:i}=this,o=ea(this.options.animation);t?i.attr({translateX:e.plotLeft+e.plotWidth/2,translateY:e.plotTop+e.plotHeight/2,scaleX:.001,scaleY:.001}):i.animate({translateX:e.plotLeft,translateY:e.plotTop,scaleX:1,scaleY:1},o)}clearBounds(){this.points.forEach(t=>{delete t.bounds,delete t.insetIndex,delete t.projectedPath}),delete this.bounds}doFullTranslate(){return!!(this.isDirtyData||this.chart.isResizing||!this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroups?.forEach(t=>t?.clip(this.chart.clipRect))}drawPoints(){let t=this,{chart:e,group:i,transformGroups:o=[]}=this,{mapView:s,renderer:r}=e;if(s){this.transformGroups=o,o[0]||(o[0]=r.g().add(i));for(let t=0,e=s.insets.length;t<e;++t)o[t+1]||o.push(r.g().add(i));this.doFullTranslate()&&(this.points.forEach(t=>{let{graphic:e}=t;t.group=o["number"==typeof t.insetIndex?t.insetIndex+1:0],e&&e.parentGroup!==t.group&&e.add(t.group)}),ep.prototype.drawPoints.apply(this),this.points.forEach(i=>{let o=i.graphic;if(o){let s=o.animate,r="";i.name&&(r+="highcharts-name-"+i.name.replace(/ /g,"-").toLowerCase()),i.properties?.["hc-key"]&&(r+=" highcharts-key-"+i.properties["hc-key"].toString().toLowerCase()),r&&o.addClass(r),e.styledMode&&o.css(this.pointAttribs(i,i.selected&&"select"||void 0)),o.attr({visibility:!i.visible&&(i.visible||i.isNull)?"hidden":"inherit"}),o.animate=function(i,r,a){let n=ex(i["stroke-width"])&&!ex(o["stroke-width"]),l=ex(o["stroke-width"])&&!ex(i["stroke-width"]);if(n||l){let s=ew(t.getStrokeWidth(t.options),1)/(e.mapView?.getScale()||1);n&&(o["stroke-width"]=s),l&&(i["stroke-width"]=s)}return s.call(o,i,r,l?function(){o.element.removeAttribute("stroke-width"),delete o["stroke-width"],a&&a.apply(this,arguments)}:a)}}})),o.forEach((i,o)=>{let a=(0===o?s:s.insets[o-1]).getSVGTransform(),n=ew(this.getStrokeWidth(this.options),1),l=a.scaleX,h=a.scaleY>0?1:-1,p=e=>{(t.points||[]).forEach(t=>{let i,o=t.graphic;o?.["stroke-width"]&&(i=this.getStrokeWidth(t.options))&&o.attr({"stroke-width":i/e})})};if(r.globalAnimation&&e.hasRendered&&s.allowTransformAnimation){let t=Number(i.attr("translateX")),e=Number(i.attr("translateY")),o=Number(i.attr("scaleX")),s=(s,r)=>{let d=o+(l-o)*r.pos;i.attr({translateX:t+(a.translateX-t)*r.pos,translateY:e+(a.translateY-e)*r.pos,scaleX:d,scaleY:d*h,"stroke-width":n/d}),p(d)},d=eM(ea(r.globalAnimation)),c=d.step;d.step=function(){c&&c.apply(this,arguments),s.apply(this,arguments)},i.attr({animator:0}).animate({animator:1},d,(function(){"boolean"!=typeof r.globalAnimation&&r.globalAnimation.complete&&r.globalAnimation.complete({applyDrilldown:!0}),em(this,"mapZoomComplete")}).bind(this))}else en(i),i.attr(eM(a,{"stroke-width":n/l})),p(l)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){let{insets:t,projection:e}=this.chart.mapView,i=[];(this.points||[]).forEach(o=>{if(o.path||o.geometry){if("string"==typeof o.path?o.path=eh(o.path):ef(o.path)&&"M"===o.path[0]&&(o.path=this.chart.renderer.pathToSegments(o.path)),!o.bounds){let i=o.getProjectedBounds(e);if(i){o.labelrank=ew(o.labelrank,(i.x2-i.x1)*(i.y2-i.y1));let{midX:e,midY:s}=i;if(t&&ex(e)&&ex(s)){let r=eu(t,t=>t.isInside({x:e,y:s}));r&&(delete o.projectedPath,(i=o.getProjectedBounds(r.projection))&&r.allBounds.push(i),o.insetIndex=t.indexOf(r))}o.bounds=i}}o.bounds&&void 0===o.insetIndex&&i.push(o.bounds)}}),this.bounds=es.compositeBounds(i)}return this.bounds}getStrokeWidth(t){let e=this.pointAttrToOptions;return t[e?.["stroke-width"]||"borderWidth"]}hasData(){return!!this.dataTable.rowCount}pointAttribs(t,e){let{mapView:i,styledMode:o}=t.series.chart,s=o?this.colorAttribs(t):ep.prototype.pointAttribs.call(this,t,e),r=this.getStrokeWidth(t.options);if(e){let i=eM(this.options.states&&this.options.states[e],t.options.states&&t.options.states[e]||{}),o=this.getStrokeWidth(i);ey(o)&&(r=o),s.stroke=i.borderColor??t.color}r&&i&&(r/=i.getScale());let a=this.getStrokeWidth(this.options);return s.dashstyle&&i&&ex(a)&&(r=a/i.getScale()),t.visible||(s.fill=this.options.nullColor),ey(r)?s["stroke-width"]=r:delete s["stroke-width"],s["stroke-linecap"]=s["stroke-linejoin"]=this.options.linecap,s}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(t,e=!0,i,o){delete this.bounds,super.setData(t,!1,void 0,o),this.processData(),this.generatePoints(),e&&this.chart.redraw(i)}dataColumnKeys(){return this.pointArrayMap}processData(){let t,e,i,o=this.options,s=o.data,r=this.chart,a=r.options.chart,n=this.joinBy,l=o.keys||this.pointArrayMap,h=[],p={},d=this.chart.mapView,c=d&&(eb(o.mapData,!0)?d.getGeoMap(o.mapData):d.geoMap),u=r.mapTransforms=a.mapTransforms||c?.["hc-transform"]||r.mapTransforms;u&&ev(u,t=>{t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),ef(o.mapData)?i=o.mapData:c&&"FeatureCollection"===c.type&&(this.mapTitle=c.title,i=m().geojson(c,this.type,this)),this.processedData=[];let g=this.processedData;if(s){let t;for(let e=0,i=s.length;e<i;++e){if(ex(t=s[e]))g[e]={value:t};else if(ef(t)){let i=0;g[e]={},!o.keys&&t.length>l.length&&"string"==typeof t[0]&&(g[e]["hc-key"]=t[0],++i);for(let o=0;o<l.length;++o,++i)l[o]&&void 0!==t[i]&&(l[o].indexOf(".")>0?td.prototype.setNestedProperty(g[e],t[i],l[o]):g[e][l[o]]=t[i])}else g[e]=s[e];n&&"_i"===n[0]&&(g[e]._i=e)}}if(i){this.mapData=i,this.mapMap={};for(let o=0;o<i.length;o++)e=(t=i[o]).properties,t._i=o,n[0]&&e&&e[n[0]]&&(t[n[0]]=e[n[0]]),p[t[n[0]]]=t;if(this.mapMap=p,n[1]){let t=n[1];g.forEach(e=>{let i=eg(t,e);p[i]&&h.push(p[i])})}if(o.allAreas){if(n[1]){let t=n[1];g.forEach(e=>{h.push(eg(t,e))})}let t="|"+h.map(function(t){return t&&t[n[0]]}).join("|")+"|";i.forEach(e=>{n[0]&&-1!==t.indexOf("|"+e[n[0]]+"|")||g.push(eM(e,{value:null}))})}}this.dataTable.rowCount=g.length}setOptions(t){let e=super.setOptions(t),i=e.joinBy;return null===e.joinBy&&(i="_i"),i&&(this.joinBy=eP(i),this.joinBy[1]||(this.joinBy[1]=this.joinBy[0])),e}translate(){let t=this.doFullTranslate(),e=this.chart.mapView,i=e?.projection;if(this.chart.hasRendered&&(this.isDirtyData||!this.hasRendered)&&(this.processData(),this.generatePoints(),delete this.bounds,!e||e.userOptions.center||ex(e.userOptions.zoom)||e.zoom!==e.minZoom?this.getProjectedBounds():e.fitToBounds(void 0,void 0,!1)),e){let o=e.getSVGTransform();this.points.forEach(s=>{let r=ex(s.insetIndex)&&e.insets[s.insetIndex].getSVGTransform()||o;r&&s.bounds&&ex(s.bounds.midX)&&ex(s.bounds.midY)&&(s.plotX=s.bounds.midX*r.scaleX+r.translateX,s.plotY=s.bounds.midY*r.scaleY+r.translateY),t&&(s.shapeType="path",s.shapeArgs={d:td.getProjectedPath(s,i)}),!s.hiddenInDataClass&&(s.projectedPath&&!s.projectedPath.length?s.setVisible(!1):s.visible||s.setVisible(!0))})}em(this,"afterTranslate")}update(t){t.mapData&&this.chart.mapView?.recommendMapView(this.chart,[this.chart.options.chart.map,...(this.chart.options.series||[]).map((e,i)=>i===this._i?t.mapData:e.mapData)],!0),super.update.apply(this,arguments)}}eT.defaultOptions=eM(ed.defaultOptions,{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){let{numberFormatter:t}=this.series.chart,{value:e}=this.point;return tc(e)?t(e,-1):this.point.name||""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}),ec(eT.prototype,{type:"map",axisTypes:F().seriesMembers.axisTypes,colorAttribs:F().seriesMembers.colorAttribs,colorKey:F().seriesMembers.colorKey,directTouch:!0,drawDataLabels:el,drawGraph:el,forceDL:!0,getCenter:R.getCenter,getExtremesFromAll:!0,getSymbol:el,isCartesian:!1,parallelArrays:F().seriesMembers.parallelArrays,pointArrayMap:F().seriesMembers.pointArrayMap,pointClass:td,preserveAspectRatio:!0,searchPoint:el,trackerGroups:F().seriesMembers.trackerGroups,useMapGeometry:!0}),F().compose(eT),tr().registerSeriesType("map",eT);let ej=eT,{extend:eC,merge:eA}=m();class eL extends ej{pointAttribs(t,e){let i=super.pointAttribs(t,e);return i.fill=this.options.fillColor,i}}eL.defaultOptions=eA(ej.defaultOptions,{lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"}),eC(eL.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),tr().registerSeriesType("mapline",eL);let{scatter:ek}=tr().seriesTypes,{isNumber:eB}=m();class eD extends ek.prototype.pointClass{isValid(){return!!(this.options.geometry||eB(this.x)&&eB(this.y)||eB(this.options.lon)&&eB(this.options.lat))}}let{noop:eS}=m(),{map:eO,scatter:eV}=tr().seriesTypes,{extend:eE,fireEvent:ez,isNumber:eI,merge:eF}=m();class eX extends eV{constructor(){super(...arguments),this.clearBounds=eO.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroups?.forEach(t=>{t?.clip(this.chart.clipRect)})}projectPoint(t){let e=this.chart.mapView;if(e){let{geometry:i,lon:o,lat:s}=t,r=i&&"Point"===i.type&&i.coordinates;if(eI(o)&&eI(s)&&(r=[o,s]),r)return e.lonLatToProjectedUnits({lon:r[0],lat:r[1]})}}translate(){let t=this.chart.mapView;if(this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),t){let e=t.getSVGTransform(),{hasCoordinates:i}=t.projection;this.points.forEach(o=>{let s,{x:r,y:a}=o,n=eI(o.insetIndex)&&t.insets[o.insetIndex].getSVGTransform()||e,l=this.projectPoint(o.options)||o.properties&&this.projectPoint(o.properties);if(l?(r=l.x,a=l.y):o.bounds&&(r=o.bounds.midX,a=o.bounds.midY,n&&eI(r)&&eI(a)&&(o.plotX=r*n.scaleX+n.translateX,o.plotY=a*n.scaleY+n.translateY,s=!0)),eI(r)&&eI(a)){if(!s){let e=t.projectedUnitsToPixels({x:r,y:a});o.plotX=e.x,o.plotY=i?e.y:this.chart.plotHeight-e.y}}else o.y=o.plotX=o.plotY=void 0;o.isInside=this.isPointInside(o),o.zone=this.zones.length?o.getZone():void 0})}ez(this,"afterTranslate")}}eX.defaultOptions=eF(eV.defaultOptions,{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"}),$().prototype.symbols.mapmarker=(t,e,i,o,s)=>{let r,a,n=s&&"legend"===s.context;n?(r=t+i/2,a=e+o):s&&"number"==typeof s.anchorX&&"number"==typeof s.anchorY?(r=s.anchorX,a=s.anchorY):(r=t+i/2,a=e+o/2,e-=o);let l=n?o/3:o/2;return[["M",r,a],["C",r,a,r-l,e+1.5*l,r-l,e+l],["A",l,l,1,1,1,r+l,e+l],["C",r+l,e+1.5*l,r,a,r,a],["Z"]]},eE(eX.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:eD,searchPoint:eS,useMapGeometry:!0}),tr().registerSeriesType("mappoint",eX);let eY=o.default.Series.types.bubble;var eN=c.n(eY);let eG=e.default.Point;var eU=c.n(eG);let{seriesTypes:{scatter:{prototype:{pointClass:eZ}}}}=tr(),{extend:eW}=m();class eR extends eZ{haloPath(t){let e=(t&&this.marker&&this.marker.radius||0)+t;if(this.series.chart.inverted){let t=this.pos()||[0,0],{xAxis:i,yAxis:o,chart:s}=this.series,r=2*e;return s.renderer.symbols.circle((i?.len||0)-t[1]-e,(o?.len||0)-t[0]-e,r,r)}return eU().prototype.haloPath.call(this,e)}}eW(eR.prototype,{ttBelow:!1});let eq=eR,{seriesTypes:{map:{prototype:{pointClass:{prototype:eH}}}}}=tr(),{extend:e_}=m();class e$ extends eq{isValid(){return"number"==typeof this.z}}e_(e$.prototype,{applyOptions:eH.applyOptions,getProjectedBounds:eH.getProjectedBounds});let{seriesTypes:{map:{prototype:eK},mappoint:{prototype:eJ}}}=tr(),{extend:eQ,merge:e0}=m();class e1 extends eN(){constructor(){super(...arguments),this.clearBounds=eK.clearBounds}searchPoint(t,e){return this.searchKDTree({plotX:t.chartX-this.chart.plotLeft,plotY:t.chartY-this.chart.plotTop},e,t)}translate(){eJ.translate.call(this),this.getRadii(),this.translateBubble()}}e1.defaultOptions=e0(eN().defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),eQ(e1.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:eK.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:e$,processData:eK.processData,projectPoint:eJ.projectPoint,kdAxisArray:["plotX","plotY"],setData:eK.setData,setOptions:eK.setOptions,updateData:eK.updateData,useMapGeometry:!0,xyFromShape:!0}),tr().registerSeriesType("mapbubble",e1);let e2=e.default.Color;var e3=c.n(e2);let{scatter:{prototype:{pointClass:e6}}}=tr().seriesTypes,{clamp:e8,defined:e7,extend:e9,pick:e4}=m();class e5 extends e6{applyOptions(t,e){return(this.isNull||null===this.value)&&delete this.color,super.applyOptions(t,e),this.formatPrefix=this.isNull||null===this.value?"null":"point",this}getCellAttributes(){let t=this.series,e=t.options,i=(e.colsize||1)/2,o=(e.rowsize||1)/2,s=t.xAxis,r=t.yAxis,a=this.options.marker||t.options.marker,n=t.pointPlacementToXValue(),l=e4(this.pointPadding,e.pointPadding,0),h={x1:e8(Math.round(s.len-s.translate(this.x-i,!1,!0,!1,!0,-n)),-s.len,2*s.len),x2:e8(Math.round(s.len-s.translate(this.x+i,!1,!0,!1,!0,-n)),-s.len,2*s.len),y1:e8(Math.round(r.translate(this.y-o,!1,!0,!1,!0)),-r.len,2*r.len),y2:e8(Math.round(r.translate(this.y+o,!1,!0,!1,!0)),-r.len,2*r.len)};for(let t of[["width","x"],["height","y"]]){let e=t[0],i=t[1],o=i+"1",n=i+"2",p=Math.abs(h[o]-h[n]),d=a&&a.lineWidth||0,c=Math.abs(h[o]+h[n])/2,u=a&&a[e];if(e7(u)&&u<p){let t=u/2+d/2;h[o]=c-t,h[n]=c+t}l&&(("x"===i&&s.reversed||"y"===i&&!r.reversed)&&(o=n,n=i+"1"),h[o]+=l,h[n]-=l)}return h}haloPath(t){if(!t)return[];let{x:e=0,y:i=0,width:o=0,height:s=0}=this.shapeArgs||{};return[["M",e-t,i-t],["L",e-t,i+s+t],["L",e+o+t,i+s+t],["L",e+o+t,i-t],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}e9(e5.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1});let{isNumber:it}=m(),{doc:ie}=m(),{defined:ii,pick:io}=m(),{series:is,seriesTypes:{column:ir,scatter:ia}}=tr(),{prototype:{symbols:il}}=$(),{addEvent:ih,extend:ip,fireEvent:id,isNumber:ic,merge:iu,pick:im}=m(),{colorFromPoint:ig,getContext:iy}={colorFromPoint:function(t,e){let i=e.series.colorAxis;if(i){let o=i.toColor(t||0,e).split(")")[0].split("(")[1].split(",").map(t=>io(parseFloat(t),parseInt(t,10)));return o[3]=255*io(o[3],1),ii(t)&&e.visible||(o[3]=0),o}return[0,0,0,0]},getContext:function(t){let{canvas:e,context:i}=t;return e&&i?(i.clearRect(0,0,e.width,e.height),i):(t.canvas=ie.createElement("canvas"),t.context=t.canvas.getContext("2d",{willReadFrequently:!0})||void 0,t.context)}};class ix extends ia{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let t=this,e=t.options,i=e.interpolation,o=e.marker||{};if(i){let{image:e,chart:i,xAxis:o,yAxis:s}=t,{reversed:r=!1,len:a}=o,{reversed:n=!1,len:l}=s,h={width:a,height:l};if(!e||t.isDirtyData||t.isDirtyCanvas){let a=iy(t),{canvas:l,options:{colsize:p=1,rowsize:d=1},points:c,points:{length:u}}=t,m=i.colorAxis&&i.colorAxis[0];if(l&&a&&m){let{min:m,max:g}=o.getExtremes(),{min:f,max:y}=s.getExtremes(),x=g-m,b=y-f,M=Math.round(x/p/8*8),v=Math.round(b/d/8*8),[w,P]=[[M,M/x,r,"ceil"],[v,v/b,!n,"floor"]].map(([t,e,i,o])=>i?i=>Math[o](t-e*i):t=>Math[o](e*t)),T=l.width=M+1,j=T*(l.height=v+1),C=(u-1)/j,A=new Uint8ClampedArray(4*j),L=(t,e)=>4*Math.ceil(T*P(e-f)+w(t-m));t.buildKDTree();for(let t=0;t<j;t++){let e=c[Math.ceil(C*t)],{x:i,y:o}=e;A.set(ig(e.value,e),L(i,o))}a.putImageData(new ImageData(A,T),0,0),e?e.attr({...h,href:l.toDataURL("image/png",1)}):(t.directTouch=!1,t.image=i.renderer.image(l.toDataURL("image/png",1)).attr(h).add(t.group))}t.isDirtyCanvas=!1}else(e.width!==a||e.height!==l)&&e.attr(h)}else(o.enabled||t._hasPointMarkers)&&(is.prototype.drawPoints.call(t),t.points.forEach(e=>{e.graphic&&(e.graphic[t.chart.styledMode?"css":"animate"](t.colorAttribs(e)),null===e.value&&e.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:t,dataMax:e}=is.prototype.getExtremes.call(this,this.getColumn("value"));return ic(t)&&(this.valueMin=t),ic(e)&&(this.valueMax=e),is.prototype.getExtremes.call(this)}getValidPoints(t,e){return is.prototype.getValidPoints.call(this,t,e,!0)}hasData(){return!!this.dataTable.rowCount}init(){super.init.apply(this,arguments);let t=this.options;t.pointRange=im(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1,il.ellipse=il.circle,t.marker&&ic(t.borderRadius)&&(t.marker.r=t.borderRadius)}markerAttribs(t,e){let i=t.shapeArgs||{};if(t.hasImage)return{x:t.plotX,y:t.plotY};if(e&&"normal"!==e){let o=t.options.marker||{},s=this.options.marker||{},r=s.states?.[e]||{},a=o.states?.[e]||{},n=(a.width||r.width||i.width||0)+(a.widthPlus||r.widthPlus||0),l=(a.height||r.height||i.height||0)+(a.heightPlus||r.heightPlus||0);return{x:(i.x||0)+((i.width||0)-n)/2,y:(i.y||0)+((i.height||0)-l)/2,width:n,height:l}}return i}pointAttribs(t,e){let i=is.prototype.pointAttribs.call(this,t,e),o=this.options||{},s=this.chart.options.plotOptions||{},r=s.series||{},a=s.heatmap||{},n=t?.options.borderColor||o.borderColor||a.borderColor||r.borderColor,l=t?.options.borderWidth||o.borderWidth||a.borderWidth||r.borderWidth||i["stroke-width"];if(i.stroke=t?.marker?.lineColor||o.marker?.lineColor||n||this.color,i["stroke-width"]=l,e&&"normal"!==e){let s=iu(o.states?.[e],o.marker?.states?.[e],t?.options.states?.[e]||{});i.fill=s.color||e3().parse(i.fill).brighten(s.brightness||0).get(),i.stroke=s.lineColor||i.stroke}return i}translate(){let{borderRadius:t,marker:e}=this.options,i=e?.symbol||"rect",o=il[i]?i:"rect",s=-1!==["circle","square"].indexOf(o);for(let e of(this.generatePoints(),this.points)){let r=e.getCellAttributes(),a=Math.min(r.x1,r.x2),n=Math.min(r.y1,r.y2),l=Math.max(Math.abs(r.x2-r.x1),0),h=Math.max(Math.abs(r.y2-r.y1),0);if(e.hasImage=0===(e.marker?.symbol||i||"").indexOf("url"),s){let t=Math.abs(l-h);a=Math.min(r.x1,r.x2)+(l<h?0:t/2),n=Math.min(r.y1,r.y2)+(l<h?t/2:0),l=h=Math.min(l,h)}e.hasImage&&(e.marker={width:l,height:h}),e.plotX=e.clientX=(r.x1+r.x2)/2,e.plotY=(r.y1+r.y2)/2,e.shapeType="path",e.shapeArgs=iu(!0,{x:a,y:n,width:l,height:h},{d:il[o](a,n,l,h,{r:ic(t)?t:0})})}id(this,"afterTranslate")}}ix.defaultOptions=iu(ia.defaultOptions,{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:t}=this.series.chart,{value:e}=this.point;return it(e)?t(e,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}),ih(ix,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints(),this.options.enableMouseTracking&&this.drawTracker()}),ip(ix.prototype,{axisTypes:F().seriesMembers.axisTypes,colorKey:F().seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,keysAffectYAxis:["y"],parallelArrays:F().seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:e5,specialGroup:"group",trackerGroups:F().seriesMembers.trackerGroups,alignDataLabel:ir.prototype.alignDataLabel,colorAttribs:F().seriesMembers.colorAttribs,getSymbol:is.prototype.getSymbol}),F().compose(ix),tr().registerSeriesType("heatmap",ix);/**
 * @license Highmaps JS v12.4.0-modified (2025-11-13)
 * @module highcharts/modules/map
 * @requires highcharts
 *
 * Highmaps as a plugin for Highcharts or Highcharts Stock.
 *
 * (c) 2011-2025 Torstein Honsi
 *
 * License: www.highcharts.com/license
 */let ib=m();ib.ColorMapComposition=F(),ib.MapChart=ib.MapChart||ti,ib.MapNavigation=ib.MapNavigation||z,ib.MapView=ib.MapView||es,ib.Projection=ib.Projection||tH,ib.mapChart=ib.Map=ib.MapChart.mapChart,ib.maps=ib.MapChart.maps,ib.geojson=tw.geojson,ib.topo2geo=tw.topo2geo,tw.compose(ib.Chart),e1.compose(ib.Axis,ib.Chart,ib.Legend),z.compose(ti,ib.Pointer,ib.SVGRenderer),es.compose(ti);let{parse:iM}=e3(),{addEvent:iv,extend:iw,merge:iP,pick:iT,splat:ij}=m();!function(t){let e;function i(){let{userOptions:t}=this;this.colorAxis=[],t.colorAxis&&(t.colorAxis=ij(t.colorAxis),t.colorAxis.map(t=>new e(this,t)))}function o(t){let e=this.chart.colorAxis||[],i=e=>{let i=t.allItems.indexOf(e);-1!==i&&(this.destroyItem(t.allItems[i]),t.allItems.splice(i,1))},o=[],s,r;for(e.forEach(function(t){s=t.options,s?.showInLegend&&(s.dataClasses&&s.visible?o=o.concat(t.getDataClassLegendSymbols()):s.visible&&o.push(t),t.series.forEach(function(t){(!t.options.showInLegend||s.dataClasses)&&("point"===t.options.legendType?t.points.forEach(function(t){i(t)}):i(t))}))}),r=o.length;r--;)t.allItems.unshift(o[r])}function s(t){t.visible&&t.item.legendColor&&t.item.legendItem.symbol.attr({fill:t.item.legendColor})}function r(t){this.chart.colorAxis?.forEach(e=>{e.update({},t.redraw)})}function a(){(this.chart.colorAxis?.length||this.colorAttribs)&&this.translateColors()}function n(){let t=this.axisTypes;t?-1===t.indexOf("colorAxis")&&t.push("colorAxis"):this.axisTypes=["colorAxis"]}function l(t){let e=this,i=t?"show":"hide";e.visible=e.options.visible=!!t,["graphic","dataLabel"].forEach(function(t){e[t]&&e[t][i]()}),this.series.buildKDTree()}function h(){let t=this,e=this.getPointsCollection(),i=this.options.nullColor,o=this.colorAxis,s=this.colorKey;e.forEach(e=>{let r=e.getNestedProperty(s),a=e.options.color||(e.isNull||null===e.value?i:o&&void 0!==r?o.toColor(r,e):e.color||t.color);a&&e.color!==a&&(e.color=a,"point"===t.options.legendType&&e.legendItem&&e.legendItem.label&&t.chart.legend.colorizeItem(e,e.visible))})}function p(){this.elem.attr("fill",iM(this.start).tweenTo(iM(this.end),this.pos),void 0,!0)}function d(){this.elem.attr("stroke",iM(this.start).tweenTo(iM(this.end),this.pos),void 0,!0)}t.compose=function(t,c,u,m,g){let f=c.prototype,y=u.prototype,x=g.prototype;f.collectionsWithUpdate.includes("colorAxis")||(e=t,f.collectionsWithUpdate.push("colorAxis"),f.collectionsWithInit.colorAxis=[f.addColorAxis],iv(c,"afterCreateAxes",i),function(t){let i=t.prototype.createAxis;t.prototype.createAxis=function(t,o){if("colorAxis"!==t)return i.apply(this,arguments);let s=new e(this,iP(o.axis,{index:this[t].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(t=>{t.series=[]}),this.series.forEach(t=>{t.bindAxes(),t.isDirtyData=!0}),iT(o.redraw,!0)&&this.redraw(o.animation),s}}(c),y.fillSetter=p,y.strokeSetter=d,iv(m,"afterGetAllItems",o),iv(m,"afterColorizeItem",s),iv(m,"afterUpdate",r),iw(x,{optionalAxis:"colorAxis",translateColors:h}),iw(x.pointClass.prototype,{setVisible:l}),iv(g,"afterTranslate",a,{order:1}),iv(g,"bindAxes",n))},t.pointSetVisible=l}(d||(d={}));let iC=d,{series:{prototype:{pointClass:iA}},seriesTypes:{heatmap:{prototype:{pointClass:iL}}}}=tr(),{extend:ik}=m();class iB extends iL{haloPath(){return this.series.tileShape.haloPath.apply(this,arguments)}}ik(iB.prototype,{setState:iA.prototype.setState,setVisible:iC.pointSetVisible});let{noop:iD}=m(),{heatmap:iS,scatter:iO}=tr().seriesTypes,{clamp:iV,pick:iE}=m();function iz(t,e,i){let o=t.options;return{xPad:-((o.colsize||1)/e),yPad:-((o.rowsize||1)/i)}}let iI={hexagon:{alignDataLabel:iO.prototype.alignDataLabel,getSeriesPadding:function(t){return iz(t,3,2)},haloPath:function(t){if(!t)return[];let e=this.tileEdges;return[["M",e.x2-t,e.y1+t],["L",e.x3+t,e.y1+t],["L",e.x4+1.5*t,e.y2],["L",e.x3+t,e.y3-t],["L",e.x2-t,e.y3-t],["L",e.x1-1.5*t,e.y2],["Z"]]},translate:function(){let t,e=this.options,i=this.xAxis,o=this.yAxis,s=e.pointPadding||0,r=(e.colsize||1)/3,a=(e.rowsize||1)/2;for(let e of(this.generatePoints(),this.points)){let n=iV(Math.floor(i.len-i.translate(e.x-2*r,0,1,0,1)),-i.len,2*i.len),l=iV(Math.floor(i.len-i.translate(e.x-r,0,1,0,1)),-i.len,2*i.len),h=iV(Math.floor(i.len-i.translate(e.x+r,0,1,0,1)),-i.len,2*i.len),p=iV(Math.floor(i.len-i.translate(e.x+2*r,0,1,0,1)),-i.len,2*i.len),d=iV(Math.floor(o.translate(e.y-a,0,1,0,1)),-o.len,2*o.len),c=iV(Math.floor(o.translate(e.y,0,1,0,1)),-o.len,2*o.len),u=iV(Math.floor(o.translate(e.y+a,0,1,0,1)),-o.len,2*o.len),m=e.pointPadding??s,g=m*Math.abs(l-n)/Math.abs(u-c),f=i.reversed?-g:g,y=i.reversed?-m:m,x=o.reversed?-m:m;e.x%2&&(t=t||Math.round(Math.abs(u-d)/2)*(o.reversed?-1:1),d+=t,c+=t,u+=t),e.plotX=e.clientX=(l+h)/2,e.plotY=c,e.tileEdges={x1:n+=f+y,x2:l+=y,x3:h-=y,x4:p-=f+y,y1:d-=x,y2:c,y3:u+=x},e.shapeType="path",e.shapeArgs={d:[["M",l,d],["L",h,d],["L",p,c],["L",h,u],["L",l,u],["L",n,c],["Z"]]}}this.translateColors()}},diamond:{alignDataLabel:iO.prototype.alignDataLabel,getSeriesPadding:function(t){return iz(t,2,2)},haloPath:function(t){if(!t)return[];let e=this.tileEdges;return[["M",e.x2,e.y1+t],["L",e.x3+t,e.y2],["L",e.x2,e.y3-t],["L",e.x1-t,e.y2],["Z"]]},translate:function(){let t,e=this.options,i=this.xAxis,o=this.yAxis,s=e.pointPadding||0,r=e.colsize||1,a=(e.rowsize||1)/2;for(let e of(this.generatePoints(),this.points)){let n=iV(Math.round(i.len-i.translate(e.x-r,0,1,0,0)),-i.len,2*i.len),l=iV(Math.round(i.len-i.translate(e.x+r,0,1,0,0)),-i.len,2*i.len),h=iV(Math.round(o.translate(e.y-a,0,1,0,0)),-o.len,2*o.len),p=iV(Math.round(o.translate(e.y,0,1,0,0)),-o.len,2*o.len),d=iV(Math.round(o.translate(e.y+a,0,1,0,0)),-o.len,2*o.len),c=iV(Math.round(i.len-i.translate(e.x,0,1,0,0)),-i.len,2*i.len),u=iE(e.pointPadding,s),m=u*Math.abs(c-n)/Math.abs(d-p),g=i.reversed?-m:m,f=o.reversed?-u:u;e.x%2&&(t=Math.abs(d-h)/2*(o.reversed?-1:1),h+=t,p+=t,d+=t),e.plotX=e.clientX=c,e.plotY=p,e.tileEdges={x1:n+=g,x2:c,x3:l-=g,y1:h-=f,y2:p,y3:d+=f},e.shapeType="path",e.shapeArgs={d:[["M",c,h],["L",l,p],["L",c,d],["L",n,p],["Z"]]}}this.translateColors()}},circle:{alignDataLabel:iO.prototype.alignDataLabel,getSeriesPadding:function(t){return iz(t,2,2)},haloPath:function(t){return iO.prototype.pointClass.prototype.haloPath.call(this,t+(t&&this.radius))},translate:function(){let t=this.options,e=this.xAxis,i=this.yAxis,o=t.pointPadding||0,s=(t.rowsize||1)/2,r=t.colsize||1,a,n,l,h,p=!1;for(let t of(this.generatePoints(),this.points)){let d=iV(Math.round(e.len-e.translate(t.x,0,1,0,0)),-e.len,2*e.len),c=o,u=!1,m=iV(Math.round(i.translate(t.y,0,1,0,0)),-i.len,2*i.len);void 0!==t.pointPadding&&(c=t.pointPadding,u=!0,p=!0),(!h||p)&&(l=Math.floor(Math.sqrt((a=Math.abs(iV(Math.floor(e.len-e.translate(t.x+r,0,1,0,0)),-e.len,2*e.len)-d))*a+(n=Math.abs(iV(Math.floor(i.translate(t.y+s,0,1,0,0)),-i.len,2*i.len)-m))*n)/2),h=Math.min(a,l,n)-c,p&&!u&&(p=!1)),t.x%2&&(m+=n*(i.reversed?-1:1)),t.plotX=t.clientX=d,t.plotY=m,t.radius=h,t.shapeType="circle",t.shapeArgs={x:d,y:m,r:h}}this.translateColors()}},square:{alignDataLabel:iS.prototype.alignDataLabel,translate:iS.prototype.translate,getSeriesPadding:iD,haloPath:iS.prototype.pointClass.prototype.haloPath}},{composed:iF,noop:iX}=m(),{column:iY,heatmap:iN,scatter:iG}=tr().seriesTypes,{addEvent:iU,extend:iZ,merge:iW,pushUnique:iR}=m();function iq(){if(this.recomputingForTilemap||"colorAxis"===this.coll)return;let t=this,e=t.series.map(function(e){return e.getSeriesPixelPadding&&e.getSeriesPixelPadding(t)}).reduce(function(t,e){return(t&&t.padding)>(e&&e.padding)?t:e},void 0)||{padding:0,axisLengthFactor:1},i=Math.round(e.padding*e.axisLengthFactor);e.padding&&(t.len-=i,t.recomputingForTilemap=!0,t.setAxisTranslation(),delete t.recomputingForTilemap,t.minPixelPadding+=e.padding,t.len+=i)}class iH extends iN{static compose(t){iR(iF,"TilemapSeries")&&iU(t,"afterSetAxisTranslation",iq)}alignDataLabel(){return this.tileShape.alignDataLabel.apply(this,arguments)}drawPoints(){for(let t of(iY.prototype.drawPoints.call(this),this.points))t.graphic&&t.graphic[this.chart.styledMode?"css":"animate"](this.colorAttribs(t))}getSeriesPixelPadding(t){let e=t.isXAxis,i=this.tileShape.getSeriesPadding(this);if(!i)return{padding:0,axisLengthFactor:1};let o=Math.round(t.translate(e?2*i.xPad:i.yPad,0,1,0,1)),s=Math.round(t.translate(e?i.xPad:0,0,1,0,1));return{padding:(t.single?Math.abs(o-s)/2:Math.abs(o-s))||0,axisLengthFactor:e?2:1.1}}setOptions(){let t=super.setOptions.apply(this,arguments);return this.tileShape=iI[t.tileShape],t}translate(){return this.tileShape.translate.apply(this,arguments)}}iH.defaultOptions=iW(iN.defaultOptions,{marker:null,states:{hover:{halo:{enabled:!0,size:2,opacity:.5,attributes:{zIndex:3}}}},pointPadding:2,tileShape:"hexagon"}),iZ(iH.prototype,{getSymbol:iX,markerAttribs:iG.prototype.markerAttribs,pointAttribs:iY.prototype.pointAttribs,pointClass:iB}),tr().registerSeriesType("tilemap",iH);let i_=m();iH.compose(i_.Axis);let i$=m();export{i$ as default};