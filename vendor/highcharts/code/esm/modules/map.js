/**
 * Highmaps JS v12.4.0-modified (2025-11-11)
 * @module highcharts/modules/map
 * @requires highcharts
 *
 * Highmaps as a plugin for Highcharts or Highcharts Stock.
 *
 * (c) 2011-2025 Torstein Honsi
 *
 * License: www.highcharts.com/license
 */let t;import*as e from"../highcharts.js";import"../highcharts.js";var i,o,s,r,a,n,l,h,p,d,c,u={};u.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return u.d(e,{a:e}),e},u.d=(t,e)=>{for(var i in e)u.o(e,i)&&!u.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},u.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);let m=e.default;var g=u.n(m);let f=e.default.Axis;var b=u.n(f);let y=e.default.Color;var x=u.n(y);let{parse:M}=x(),{addEvent:v,extend:w,merge:C,pick:T,splat:L}=g();!function(t){let e;function i(){let{userOptions:t}=this;this.colorAxis=[],t.colorAxis&&(t.colorAxis=L(t.colorAxis),t.colorAxis.map(t=>new e(this,t)))}function o(t){let e=this.chart.colorAxis||[],i=e=>{let i=t.allItems.indexOf(e);-1!==i&&(this.destroyItem(t.allItems[i]),t.allItems.splice(i,1))},o=[],s,r;for(e.forEach(function(t){s=t.options,s?.showInLegend&&(s.dataClasses&&s.visible?o=o.concat(t.getDataClassLegendSymbols()):s.visible&&o.push(t),t.series.forEach(function(t){(!t.options.showInLegend||s.dataClasses)&&("point"===t.options.legendType?t.points.forEach(function(t){i(t)}):i(t))}))}),r=o.length;r--;)t.allItems.unshift(o[r])}function s(t){t.visible&&t.item.legendColor&&t.item.legendItem.symbol.attr({fill:t.item.legendColor})}function r(t){this.chart.colorAxis?.forEach(e=>{e.update({},t.redraw)})}function a(){(this.chart.colorAxis?.length||this.colorAttribs)&&this.translateColors()}function n(){let t=this.axisTypes;t?-1===t.indexOf("colorAxis")&&t.push("colorAxis"):this.axisTypes=["colorAxis"]}function l(t){let e=this,i=t?"show":"hide";e.visible=e.options.visible=!!t,["graphic","dataLabel"].forEach(function(t){e[t]&&e[t][i]()}),this.series.buildKDTree()}function h(){let t=this,e=this.getPointsCollection(),i=this.options.nullColor,o=this.colorAxis,s=this.colorKey;e.forEach(e=>{let r=e.getNestedProperty(s),a=e.options.color||(e.isNull||null===e.value?i:o&&void 0!==r?o.toColor(r,e):e.color||t.color);a&&e.color!==a&&(e.color=a,"point"===t.options.legendType&&e.legendItem&&e.legendItem.label&&t.chart.legend.colorizeItem(e,e.visible))})}function p(){this.elem.attr("fill",M(this.start).tweenTo(M(this.end),this.pos),void 0,!0)}function d(){this.elem.attr("stroke",M(this.start).tweenTo(M(this.end),this.pos),void 0,!0)}t.compose=function(t,c,u,m,g){let f=c.prototype,b=u.prototype,y=g.prototype;f.collectionsWithUpdate.includes("colorAxis")||(e=t,f.collectionsWithUpdate.push("colorAxis"),f.collectionsWithInit.colorAxis=[f.addColorAxis],v(c,"afterCreateAxes",i),function(t){let i=t.prototype.createAxis;t.prototype.createAxis=function(t,o){if("colorAxis"!==t)return i.apply(this,arguments);let s=new e(this,C(o.axis,{index:this[t].length,isX:!1}));return this.isDirtyLegend=!0,this.axes.forEach(t=>{t.series=[]}),this.series.forEach(t=>{t.bindAxes(),t.isDirtyData=!0}),T(o.redraw,!0)&&this.redraw(o.animation),s}}(c),b.fillSetter=p,b.strokeSetter=d,v(m,"afterGetAllItems",o),v(m,"afterColorizeItem",s),v(m,"afterUpdate",r),w(y,{optionalAxis:"colorAxis",translateColors:h}),w(y.pointClass.prototype,{setVisible:l}),v(g,"afterTranslate",a,{order:1}),v(g,"bindAxes",n))},t.pointSetVisible=l}(a||(a={}));let P=a,{parse:A}=x(),{merge:k}=g();(i=n||(n={})).initDataClasses=function(t){let e=this.chart,i=this.legendItem=this.legendItem||{},o=this.options,s=t.dataClasses||[],r,a,n=e.options.chart.colorCount,l=0,h;this.dataClasses=a=[],i.labels=[];for(let t=0,i=s.length;t<i;++t)r=k(r=s[t]),a.push(r),(e.styledMode||!r.color)&&("category"===o.dataClassColor?(e.styledMode||(n=(h=e.options.colors||[]).length,r.color=h[l]),r.colorIndex=l,++l===n&&(l=0)):r.color=A(o.minColor).tweenTo(A(o.maxColor),i<2?.5:t/(i-1)))},i.initStops=function(){let t=this.options,e=this.stops=t.stops||[[0,t.minColor||""],[1,t.maxColor||""]];for(let t=0,i=e.length;t<i;++t)e[t].color=A(e[t][1])},i.normalizedValue=function(t){let e=this.max||0,i=this.min||0;return this.logarithmic&&(t=this.logarithmic.log2lin(t)),1-(e-t)/(e-i||1)},i.toColor=function(t,e){let i,o,s,r,a,n,l=this.dataClasses,h=this.stops;if(l){for(n=l.length;n--;)if(o=(a=l[n]).from,s=a.to,(void 0===o||t>=o)&&(void 0===s||t<=s)){r=a.color,e&&(e.dataClass=n,e.colorIndex=a.colorIndex);break}}else{for(i=this.normalizedValue(t),n=h.length;n--&&!(i>h[n][0]););o=h[n]||h[n+1],i=1-((s=h[n+1]||o)[0]-i)/(s[0]-o[0]||1),r=o.color.tweenTo(s.color,i)}return r};let j=n,z=e.default.LegendSymbol;var I=u.n(z);let S=e.default.SeriesRegistry;var B=u.n(S);let{defaultOptions:E}=g(),{series:D}=B(),{defined:O,extend:V,fireEvent:N,isArray:X,isNumber:G,merge:R,pick:W,relativeLength:Y}=g();E.colorAxis=R(E.xAxis,{lineWidth:0,minPadding:0,maxPadding:0,gridLineColor:"#ffffff",gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:"#999999"},labels:{distance:8,overflow:"justify",rotation:0},minColor:"#e6e9ff",maxColor:"#0022ff",tickLength:5,showInLegend:!0});class U extends b(){static compose(t,e,i,o){P.compose(U,t,e,i,o)}constructor(t,e){super(t,e),this.coll="colorAxis",this.visible=!0,this.init(t,e)}init(t,e){let i=t.options.legend||{},o=e.layout?"vertical"!==e.layout:"vertical"!==i.layout;this.side=e.side||o?2:1,this.reversed=e.reversed,this.opposite=!o,super.init(t,e,"colorAxis"),this.userOptions=e,X(t.userOptions.colorAxis)&&(t.userOptions.colorAxis[this.index]=e),e.dataClasses&&this.initDataClasses(e),this.initStops(),this.horiz=o,this.zoomEnabled=!1}hasData(){return!!(this.tickPositions||[]).length}setTickPositions(){if(!this.dataClasses)return super.setTickPositions()}setOptions(t){let e=R(E.colorAxis,t,{showEmpty:!1,title:null,visible:this.chart.options.legend.enabled&&!1!==t.visible});super.setOptions(e),this.options.crosshair=this.options.marker}setAxisSize(){let t=this.chart,e=this.legendItem?.symbol,{width:i,height:o}=this.getSize();e&&(this.left=+e.attr("x"),this.top=+e.attr("y"),this.width=i=+e.attr("width"),this.height=o=+e.attr("height"),this.right=t.chartWidth-this.left-i,this.bottom=t.chartHeight-this.top-o,this.pos=this.horiz?this.left:this.top),this.len=(this.horiz?i:o)||U.defaultLegendLength}getOffset(){let t=this.legendItem?.group,e=this.chart.axisOffset[this.side];if(t){this.axisParent=t,super.getOffset();let i=this.chart.legend;i.allItems.forEach(function(t){t instanceof U&&t.drawLegendSymbol(i,t)}),i.render(),this.chart.getMargins(!0),this.chart.series.some(t=>t.isDrilling)||(this.isDirty=!0),this.added||(this.added=!0),this.labelLeft=0,this.labelRight=this.width,this.chart.axisOffset[this.side]=e}}setLegendColor(){let t=this.horiz,e=this.reversed,i=+!!e,o=+!e,s=t?[i,0,o,0]:[0,o,0,i];this.legendColor={linearGradient:{x1:s[0],y1:s[1],x2:s[2],y2:s[3]},stops:this.stops}}drawLegendSymbol(t,e){let i=e.legendItem||{},o=t.padding,s=t.options,r=this.options.labels,a=W(s.itemDistance,10),n=this.horiz,{width:l,height:h}=this.getSize(),p=W(s.labelPadding,n?16:30);this.setLegendColor(),i.symbol||(i.symbol=this.chart.renderer.symbol("roundedRect").attr({r:s.symbolRadius??3,zIndex:1}).add(i.group)),i.symbol.attr({x:0,y:(t.baseline||0)-11,width:l,height:h}),i.labelWidth=l+o+(n?a:W(r.x,r.distance)+(this.maxLabelLength||0)),i.labelHeight=h+o+(n?p:0)}setState(t){this.series.forEach(function(e){e.setState(t)})}setVisible(){}getSeriesExtremes(){let t=this.series,e,i,o,s,r=t.length;for(this.dataMin=1/0,this.dataMax=-1/0;r--;){for(let a of(i=(s=t[r]).colorKey=W(s.options.colorKey,s.colorKey,s.pointValKey,s.zoneAxis,"y"),o=s[i+"Min"]&&s[i+"Max"],[i,"value","y"]))if((e=s.getColumn(a)).length)break;if(o)s.minColorValue=s[i+"Min"],s.maxColorValue=s[i+"Max"];else{let t=D.prototype.getExtremes.call(s,e);s.minColorValue=t.dataMin,s.maxColorValue=t.dataMax}O(s.minColorValue)&&O(s.maxColorValue)&&(this.dataMin=Math.min(this.dataMin,s.minColorValue),this.dataMax=Math.max(this.dataMax,s.maxColorValue)),o||D.prototype.applyExtremes.call(s)}}drawCrosshair(t,e){let i,o=this.legendItem||{},s=e?.plotX,r=e?.plotY,a=this.pos,n=this.len;e&&((i=this.toPixels(e.getNestedProperty(e.series.colorKey)))<a?i=a-2:i>a+n&&(i=a+n+2),e.plotX=i,e.plotY=this.len-i,super.drawCrosshair(t,e),e.plotX=s,e.plotY=r,this.cross&&!this.cross.addedToColorAxis&&o.group&&(this.cross.addClass("highcharts-coloraxis-marker").add(o.group),this.cross.addedToColorAxis=!0,this.chart.styledMode||"object"!=typeof this.crosshair||this.cross.attr({fill:this.crosshair.color})))}getPlotLinePath(t){let e=this.left,i=t.translatedValue,o=this.top;return G(i)?this.horiz?[["M",i-4,o-6],["L",i+4,o-6],["L",i,o],["Z"]]:[["M",e,i],["L",e-6,i+6],["L",e-6,i-6],["Z"]]:super.getPlotLinePath(t)}update(t,e){let i=this.chart.legend;this.series.forEach(t=>{t.isDirtyData=!0}),(t.dataClasses&&i.allItems||this.dataClasses)&&this.destroyItems(),super.update(t,e),this.legendItem?.label&&(this.setLegendColor(),i.colorizeItem(this,!0))}destroyItems(){let t=this.chart,e=this.legendItem||{};if(e.label)t.legend.destroyItem(this);else if(e.labels)for(let i of e.labels)t.legend.destroyItem(i);t.isDirtyLegend=!0}destroy(){this.chart.isDirtyLegend=!0,this.destroyItems(),super.destroy(...[].slice.call(arguments))}remove(t){this.destroyItems(),super.remove(t)}getDataClassLegendSymbols(){let t,e=this,i=e.chart,o=e.legendItem&&e.legendItem.labels||[],s=i.options.legend,r=W(s.valueDecimals,-1),a=W(s.valueSuffix,""),n=t=>e.series.reduce((e,i)=>(e.push(...i.points.filter(e=>e.dataClass===t)),e),[]);return o.length||e.dataClasses.forEach((s,l)=>{let h=s.from,p=s.to,{numberFormatter:d}=i,c=!0;t="",void 0===h?t="< ":void 0===p&&(t="> "),void 0!==h&&(t+=d(h,r)+a),void 0!==h&&void 0!==p&&(t+=" - "),void 0!==p&&(t+=d(p,r)+a),o.push(V({chart:i,name:t,options:{},drawLegendSymbol:I().rectangle,visible:!0,isDataClass:!0,setState:t=>{for(let e of n(l))e.setState(t)},setVisible:function(){this.visible=c=e.visible=!c;let t=[];for(let e of n(l))e.setVisible(c),e.hiddenInDataClass=!c,-1===t.indexOf(e.series)&&t.push(e.series);i.legend.colorizeItem(this,c),t.forEach(t=>{N(t,"afterDataClassLegendClick")})}},s))}),o}getSize(){let{chart:t,horiz:e}=this,{height:i,width:o}=this.options,{legend:s}=t.options;return{width:W(O(o)?Y(o,t.chartWidth):void 0,s?.symbolWidth,e?U.defaultLegendLength:12),height:W(O(i)?Y(i,t.chartHeight):void 0,s?.symbolHeight,e?12:U.defaultLegendLength)}}}U.defaultLegendLength=200,U.keepProps=["legendItem"],V(U.prototype,j),Array.prototype.push.apply(b().keepProps,U.keepProps);/**
 * @license Highcharts JS v12.4.0-modified (2025-11-11)
 * @module highcharts/modules/color-axis
 * @requires highcharts
 *
 * ColorAxis module
 *
 * (c) 2012-2025 Pawel Potaczek
 *
 * License: www.highcharts.com/license
 */let F=g();F.ColorAxis=F.ColorAxis||U,F.ColorAxis.compose(F.Chart,F.Fx,F.Legend,F.Series);let Z={lang:{zoomIn:"Zoom in",zoomOut:"Zoom out"},mapNavigation:{buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{color:"#666666",fontSize:"1em",fontWeight:"bold"},theme:{fill:"#ffffff",stroke:"#e6e6e6","stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}},{defined:H,extend:_,pick:K,wrap:q}=g();!function(t){let e,i=0;function o(t){let e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,void 0,void 0,t.chartX,t.chartY)}function s(t){let o=this.chart,s=H((t=this.normalize(t)).wheelDelta)&&-t.wheelDelta/120||t.deltaY||t.detail;Math.abs(s)>=1&&(i+=Math.abs(s),e&&clearTimeout(e),e=setTimeout(()=>{i=0},50)),i<10&&o.isInsidePlot(t.chartX-o.plotLeft,t.chartY-o.plotTop)&&o.mapView&&o.mapView.zoomBy(-((o.options.mapNavigation.mouseWheelSensitivity-1)*s),void 0,[t.chartX,t.chartY],!(1>Math.abs(s))&&void 0)}function r(t,e,i){let o=this.chart;if(e=t.call(this,e,i),o&&o.mapView){let t=o.mapView.pixelsToLonLat({x:e.chartX-o.plotLeft,y:e.chartY-o.plotTop});t&&_(e,t)}return e}function a(t){let e=this.chart.options.mapNavigation;e&&K(e.enableTouchZoom,e.enabled)&&(this.chart.zooming.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}t.compose=function(t){let e=t.prototype;e.onContainerDblClick||(_(e,{onContainerDblClick:o,onContainerMouseWheel:s}),q(e,"normalize",r),q(e,"zoomOption",a))}}(l||(l={}));let $=l;function J(e,i,o,s,r){if(r){let t=r?.r||0;r.brBoxY=i-t,r.brBoxHeight=s+t}return t.roundedRect(e,i,o,s,r)}function Q(e,i,o,s,r){if(r){let t=r?.r||0;r.brBoxHeight=s+t}return t.roundedRect(e,i,o,s,r)}let tt=function(e){(t=e.prototype.symbols).bottombutton=J,t.topbutton=Q},{setOptions:te}=g(),{composed:ti}=g(),{addEvent:to,extend:ts,merge:tr,objectEach:ta,pick:tn,pushUnique:tl}=g();function th(t){t&&(t.preventDefault?.(),t.stopPropagation?.(),t.cancelBubble=!0)}class tp{static compose(t,e,i){$.compose(e),tt(i),tl(ti,"Map.Navigation")&&(to(t,"beforeRender",function(){this.mapNavigation=new tp(this),this.mapNavigation.update()}),te(Z))}constructor(t){this.chart=t,this.navButtons=[]}update(t){let e=this,i=e.chart,o=e.navButtons,s=function(t){this.handler.call(i,t),th(t)},r=i.options.mapNavigation;for(t&&(r=i.options.mapNavigation=tr(i.options.mapNavigation,t));o.length;)o.pop()?.destroy();!i.renderer.forExport&&tn(r.enableButtons,r.enabled)&&(e.navButtonsGroup||(e.navButtonsGroup=i.renderer.g().attr({zIndex:7}).add()),ta(r.buttons,(t,a)=>{let n={padding:(t=tr(r.buttonOptions,t)).padding};!i.styledMode&&t.theme&&(ts(n,t.theme),n.style=tr(t.theme.style,t.style));let{text:l,width:h=0,height:p=0,padding:d=0}=t,c=i.renderer.button("+"!==l&&"-"!==l&&l||"",0,0,s,n,void 0,void 0,void 0,"zoomIn"===a?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+({zoomIn:"zoom-in",zoomOut:"zoom-out"})[a]).attr({width:h,height:p,title:i.options.lang[a],zIndex:5}).add(e.navButtonsGroup);if("+"===l||"-"===l){let e=h+1,o=[["M",d+3,d+p/2],["L",d+e-3,d+p/2]];"+"===l&&o.push(["M",d+e/2,d+3],["L",d+e/2,d+p-3]),i.renderer.path(o).addClass("highcharts-button-symbol").attr(i.styledMode?{}:{stroke:t.style?.color,"stroke-width":3,"stroke-linecap":"round"}).add(c)}if(c.handler=t.onclick,to(c.element,"dblclick",th),o.push(c),ts(t,{width:c.width,height:2*(c.height||0)}),i.hasLoaded)c.align(t,!1,t.alignTo);else{let e=to(i,"load",()=>{c.element&&c.align(t,!1,t.alignTo),e()})}}),i.hasLoaded||to(i,"render",function(){let t=i.exporting?.group?.getBBox();if(t){let i=e.navButtonsGroup.getBBox();if(!(i.x>=t.x+t.width||i.x+i.width<=t.x||i.y>=t.y+t.height||i.y+i.height<=t.y)){let o=-i.y-i.height+t.y-5,s=t.y+t.height-i.y+5,a=r.buttonOptions&&r.buttonOptions.verticalAlign;e.navButtonsGroup.attr({translateY:"bottom"===a?o:s})}}})),this.updateEvents(r)}updateEvents(t){let e=this.chart;tn(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||to(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),tn(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||to(e.container,"wheel",function(t){if(!e.pointer.inClass(t.target,"highcharts-no-mousewheel")){let i=e.mapView?.zoom;e.pointer.onContainerMouseWheel(t),i!==e.mapView?.zoom&&th(t)}return!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())}}let td=e.default.SVGElement;var tc=u.n(td);let{column:{prototype:tu}}=B().seriesTypes,{addEvent:tm,defined:tg}=g();var tf=h||(h={});function tb(t){let e=this.series,i=e.chart.renderer;this.moveToTopOnHover&&this.graphic&&(e.stateMarkerGraphic||(e.stateMarkerGraphic=new(tc())(i,"use").css({pointerEvents:"none"}).add(this.graphic.parentGroup)),t?.state==="hover"?(this.graphic.attr({id:this.id}),e.stateMarkerGraphic.attr({href:`${i.url}#${this.id}`,visibility:"visible"})):e.stateMarkerGraphic.attr({href:""}))}tf.pointMembers={dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0&&(void 0===this.value||!isNaN(this.value))}},tf.seriesMembers={colorKey:"value",axisTypes:["xAxis","yAxis","colorAxis"],parallelArrays:["x","y","value"],pointArrayMap:["value"],trackerGroups:["group","markerGroup","dataLabelsGroup"],colorAttribs:function(t){let e={};return tg(t.color)&&(!t.state||"normal"===t.state)&&(e[this.colorProp||"fill"]=t.color),e},pointAttribs:tu.pointAttribs},tf.compose=function(t){return tm(t.prototype.pointClass,"afterSetState",tb),t};let ty=h,tx=e.default.Series;var tM=u.n(tx);let{deg2rad:tv}=g(),{fireEvent:tw,isNumber:tC,pick:tT,relativeLength:tL}=g();(o=p||(p={})).getCenter=function(){let t=this.options,e=this.chart,i=2*(t.slicedOffset||0),o=e.plotWidth-2*i,s=e.plotHeight-2*i,r=t.center,a=Math.min(o,s),n=t.thickness,l,h=t.size,p=t.innerSize||0,d,c;"string"==typeof h&&(h=parseFloat(h)),"string"==typeof p&&(p=parseFloat(p));let u=[tT(r?.[0],"50%"),tT(r?.[1],"50%"),tT(h&&h<0?void 0:t.size,"100%"),tT(p&&p<0?void 0:t.innerSize||0,"0%")];for(!e.angular||this instanceof tM()||(u[3]=0),d=0;d<4;++d)c=u[d],l=d<2||2===d&&/%$/.test(c),u[d]=tL(c,[o,s,a,u[2]][d])+(l?i:0);return u[3]>u[2]&&(u[3]=u[2]),tC(n)&&2*n<u[2]&&n>0&&(u[3]=u[2]-2*n),tw(this,"afterGetCenter",{positions:u}),u},o.getStartAndEndRadians=function(t,e){let i=tC(t)?t:0,o=tC(e)&&e>i&&e-i<360?e:i+360;return{start:tv*(i+-90),end:tv*(o+-90)}};let tP=p,tA=e.default.Chart;var tk=u.n(tA);let tj=e.default.SVGRenderer;var tz=u.n(tj);let{getOptions:tI}=g(),{isNumber:tS,merge:tB,pick:tE}=g();class tD extends tk(){init(t,e){let i=tI().credits,o=tB({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:tE(i.mapText,' \xa9 <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:tE(i.mapTextFull,"{geojson.copyright}")},mapView:{},tooltip:{followTouchMove:!1}},t);super.init(o,e)}mapZoom(t,e,i,o,s){this.mapView&&(tS(t)&&(t=Math.log(t)/Math.log(.5)),this.mapView.zoomBy(t,tS(e)&&tS(i)?this.mapView.projection.inverse([e,i]):void 0,tS(o)&&tS(s)?[o,s]:void 0))}update(t){t.chart&&"map"in t.chart&&this.mapView?.recommendMapView(this,[t.chart.map,...(this.options.series||[]).map(t=>t.mapData)],!0),super.update.apply(this,arguments)}}(s=tD||(tD={})).maps={},s.mapChart=function(t,e,i){return new s(t,e,i)},s.splitPath=function(t){let e;return e="string"==typeof t?(t=t.replace(/([A-Z])/gi," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(t=>/[A-Z]/i.test(t)?t:parseFloat(t)):t,tz().prototype.pathToSegments(e)};let tO=tD,tV={boundsFromPath:function(t){let e=-Number.MAX_VALUE,i=Number.MAX_VALUE,o=-Number.MAX_VALUE,s=Number.MAX_VALUE,r;if(t.forEach(t=>{let a=t[t.length-2],n=t[t.length-1];"number"==typeof a&&"number"==typeof n&&(i=Math.min(i,a),e=Math.max(e,a),s=Math.min(s,n),o=Math.max(o,n),r=!0)}),r)return{x1:i,y1:s,x2:e,y2:o}}},{boundsFromPath:tN}=tV,tX=B().seriesTypes.scatter.prototype.pointClass,{extend:tG,isNumber:tR,pick:tW}=g();class tY extends tX{static getProjectedPath(t,e){return t.projectedPath||(e&&t.geometry?(e.hasCoordinates=!0,t.projectedPath=e.path(t.geometry)):t.projectedPath=t.path),t.projectedPath||[]}applyOptions(t,e){let i=this.series,o=super.applyOptions(t,e),s=i.joinBy;if(i.mapData&&i.mapMap){let t=s[1],e=super.getNestedProperty(t),r=void 0!==e&&i.mapMap[e];r?tG(o,{...r,name:o.name??r.name}):-1!==i.pointArrayMap.indexOf("value")&&(o.value=o.value||null)}return o}getProjectedBounds(t){let e=tN(tY.getProjectedPath(this,t)),i=this.properties,o=this.series.chart.mapView;if(e){let s=i?.["hc-middle-lon"],r=i?.["hc-middle-lat"];if(o&&tR(s)&&tR(r)){let i=t.forward([s,r]);e.midX=i[0],e.midY=i[1]}else{let t=i?.["hc-middle-x"],o=i?.["hc-middle-y"];e.midX=e.x1+(e.x2-e.x1)*tW(this.middleX,tR(t)?t:.5);let s=tW(this.middleY,tR(o)?o:.5);this.geometry||(s=1-s),e.midY=e.y2-(e.y2-e.y1)*s}return e}}onMouseOver(t){g().clearTimeout(this.colorInterval),!this.isNull&&this.visible||this.series.options.nullInteraction?super.onMouseOver.call(this,t):this.series.onMouseOut()}setVisible(t){this.visible=this.options.visible=!!t,this.dataLabel&&this.dataLabel[t?"show":"hide"](),this.graphic&&this.graphic.attr(this.series.pointAttribs(this))}zoomTo(t){let e=this.series.chart,i=e.mapView,o=this.bounds;if(i&&o){let s=tR(this.insetIndex)&&i.insets[this.insetIndex];if(s){let t=s.projectedUnitsToPixels({x:o.x1,y:o.y1}),e=s.projectedUnitsToPixels({x:o.x2,y:o.y2}),r=i.pixelsToProjectedUnits({x:t.x,y:t.y}),a=i.pixelsToProjectedUnits({x:e.x,y:e.y});o={x1:r.x,y1:r.y,x2:a.x,y2:a.y}}i.fitToBounds(o,void 0,!1),this.series.isDirty=!0,e.redraw(t)}}}tG(tY.prototype,{dataLabelOnNull:ty.pointMembers.dataLabelOnNull,moveToTopOnHover:ty.pointMembers.moveToTopOnHover,isValid:ty.pointMembers.isValid});let{isNumber:tU}=g(),tF={center:[0,0],fitToGeometry:void 0,maxZoom:void 0,padding:0,projection:{name:void 0,parallels:void 0,rotation:void 0},zoom:void 0,insetOptions:{borderColor:"#cccccc",borderWidth:1,padding:"10%",relativeTo:"mapBoundingBox",units:"percent"}},tZ=e.default.Templating;var tH=u.n(tZ);let{win:t_}=g(),{format:tK}=tH(),{error:tq,extend:t$,merge:tJ,wrap:tQ}=g();!function(t){function e(t){return this.mapView?.lonLatToProjectedUnits(t)}function i(t){return this.mapView?.projectedUnitsToLonLat(t)}function o(t,e){let i=this.options.chart.proj4||t_.proj4;if(!i)return void tq(21,!1,this);let{jsonmarginX:o=0,jsonmarginY:s=0,jsonres:r=1,scale:a=1,xoffset:n=0,xpan:l=0,yoffset:h=0,ypan:p=0}=e,d=i(e.crs,[t.lon,t.lat]),c=e.cosAngle||e.rotation&&Math.cos(e.rotation),u=e.sinAngle||e.rotation&&Math.sin(e.rotation),m=e.rotation?[d[0]*c+d[1]*u,-d[0]*u+d[1]*c]:d;return{x:((m[0]-n)*a+l)*r+o,y:-(((h-m[1])*a+p)*r-s)}}function s(t,e){let i=this.options.chart.proj4||t_.proj4;if(!i)return void tq(21,!1,this);if(null===t.y)return;let{jsonmarginX:o=0,jsonmarginY:s=0,jsonres:r=1,scale:a=1,xoffset:n=0,xpan:l=0,yoffset:h=0,ypan:p=0}=e,d={x:((t.x-o)/r-l)/a+n,y:((t.y-s)/r+p)/a+h},c=e.cosAngle||e.rotation&&Math.cos(e.rotation),u=e.sinAngle||e.rotation&&Math.sin(e.rotation),m=i(e.crs,"WGS84",e.rotation?{x:d.x*c+-(d.y*u),y:d.x*u+d.y*c}:d);return{lat:m.y,lon:m.x}}function r(t,e){e||(e=Object.keys(t.objects)[0]);let i=t.objects[e];if(i["hc-decoded-geojson"]&&i["hc-decoded-geojson"].title===t.title)return i["hc-decoded-geojson"];let o=t.arcs;if(t.transform){let e,i,s,r=t.arcs,{scale:a,translate:n}=t.transform;o=[];for(let t=0,l=r.length;t<l;++t){let l=r[t];o.push(e=[]),i=0,s=0;for(let t=0,o=l.length;t<o;++t)e.push([(i+=l[t][0])*a[0]+n[0],(s+=l[t][1])*a[1]+n[1]])}}let s=t=>"number"==typeof t[0]?t.reduce((t,e,i)=>{let s=e<0?o[~e]:o[e];return e<0?(s=s.slice(0,0===i?s.length:s.length-1)).reverse():i&&(s=s.slice(1)),t.concat(s)},[]):t.map(s),r=i.geometries,a=[];for(let t=0,e=r.length;t<e;++t)a.push({type:"Feature",properties:r[t].properties,geometry:{type:r[t].type,coordinates:r[t].coordinates||s(r[t].arcs)}});let n={type:"FeatureCollection",copyright:t.copyright,copyrightShort:t.copyrightShort,copyrightUrl:t.copyrightUrl,features:a,"hc-recommended-mapview":i["hc-recommended-mapview"],bbox:t.bbox,title:t.title};return i["hc-decoded-geojson"]=n,n}function a(t,e){e=tJ(!0,this.options.credits,e),t.call(this,e),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})}t.compose=function(t){let r=t.prototype;r.transformFromLatLon||(r.fromLatLonToPoint=e,r.fromPointToLatLon=i,r.transformFromLatLon=o,r.transformToLatLon=s,tQ(r,"addCredits",a))},t.geojson=function(t,e="map",i){let o=[],s="Topology"===t.type?r(t):t,a=s.features;for(let t=0,i=a.length;t<i;++t){let i,s=a[t],r=s.geometry||{},n=r.type,l=r.coordinates,h=s.properties;if(("map"===e||"mapbubble"===e)&&("Polygon"===n||"MultiPolygon"===n)||"mapline"===e&&("LineString"===n||"MultiLineString"===n)?l.length&&(i={geometry:{coordinates:l,type:n}}):"mappoint"===e&&"Point"===n&&l.length&&(i={geometry:{coordinates:l,type:n}}),i){let t=h&&(h.name||h.NAME),e=h&&h.lon,s=h&&h.lat;o.push(t$(i,{lat:"number"==typeof s?s:void 0,lon:"number"==typeof e?e:void 0,name:"string"==typeof t?t:void 0,properties:h}))}}return i&&s.copyrightShort&&(i.chart.mapCredits=tK(i.chart.options.credits?.mapText,{geojson:s}),i.chart.mapCreditsFull=tK(i.chart.options.credits?.mapTextFull,{geojson:s})),o},t.topo2geo=r}(d||(d={}));let t0=d;(r=c||(c={})).getCenterOfPoints=function(t){let e=t.reduce((t,e)=>(t.x+=e.x,t.y+=e.y,t),{x:0,y:0});return{x:e.x/t.length,y:e.y/t.length}},r.getDistanceBetweenPoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},r.getAngleBetweenPoints=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},r.pointInPolygon=function({x:t,y:e},i){let o=i.length,s,r,a=!1;for(s=0,r=o-1;s<o;r=s++){let[o,n]=i[s],[l,h]=i[r];n>e!=h>e&&t<(l-o)*(e-n)/(h-n)+o&&(a=!a)}return a};let t1=c;function t2(t,e,i=!0){let o=e[e.length-1],s,r,a,n=t;for(let t=0;t<e.length;t++){let l=n;s=e[t],n=[],r=i?l[l.length-1]:l[0];for(let t=0;t<l.length;t++)t6(o,s,a=l[t])?(t6(o,s,r)||n.push(t3(o,s,r,a)),n.push(a)):t6(o,s,r)&&n.push(t3(o,s,r,a)),r=a;o=s}return n}function t6(t,e,i){return(e[0]-t[0])*(i[1]-t[1])>(e[1]-t[1])*(i[0]-t[0])}function t3(t,e,i,o){let s=[t[0]-e[0],t[1]-e[1]],r=[i[0]-o[0],i[1]-o[1]],a=t[0]*e[1]-t[1]*e[0],n=i[0]*o[1]-i[1]*o[0],l=1/(s[0]*r[1]-s[1]*r[0]),h=[(a*r[0]-n*s[0])*l,(a*r[1]-n*s[1])*l];return h.isIntersection=!0,h}let t8=Math.sign||(t=>0===t?0:t>0?1:-1),t7=Math.PI/180,t9=Math.PI/2,t4=t=>Math.tan((t9+t)/2),t5=class{constructor(t){let e=(t.parallels||[]).map(t=>t*t7),i=e[0]||0,o=e[1]??i,s=Math.cos(i);"object"==typeof t.projectedBounds&&(this.projectedBounds=t.projectedBounds);let r=i===o?Math.sin(i):Math.log(s/Math.cos(o))/Math.log(t4(o)/t4(i));1e-10>Math.abs(r)&&(r=1e-10*(t8(r)||1)),this.n=r,this.c=s*Math.pow(t4(i),r)/r}forward(t){let{c:e,n:i,projectedBounds:o}=this,s=t[0]*t7,r=t[1]*t7;e>0?r<-t9+1e-6&&(r=-t9+1e-6):r>t9-1e-6&&(r=t9-1e-6);let a=e/Math.pow(t4(r),i),n=a*Math.sin(i*s)*63.78137,l=(e-a*Math.cos(i*s))*63.78137,h=[n,l];return o&&(n<o.x1||n>o.x2||l<o.y1||l>o.y2)&&(h.outside=!0),h}inverse(t){let{c:e,n:i}=this,o=t[0]/63.78137,s=e-t[1]/63.78137,r=t8(i)*Math.sqrt(o*o+s*s),a=Math.atan2(o,Math.abs(s))*t8(s);return s*i<0&&(a-=Math.PI*t8(o)*t8(s)),[a/i/t7,(2*Math.atan(Math.pow(e/r,1/i))-t9)/t7]}},et=Math.sqrt(3)/2,ee=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-97.52595454902263,y2:97.52595454902263}}forward(t){let e=Math.PI/180,i=Math.asin(et*Math.sin(t[1]*e)),o=i*i,s=o*o*o;return[t[0]*e*Math.cos(i)*74.03120656864502/(et*(1.340264+-.24331799999999998*o+s*(.0062510000000000005+.034164*o))),74.03120656864502*i*(1.340264+-.081106*o+s*(893e-6+.003796*o))]}inverse(t){let e=t[0]/74.03120656864502,i=t[1]/74.03120656864502,o=180/Math.PI,s=i,r,a,n,l;for(let t=0;t<12&&(a=(r=s*s)*r*r,n=s*(1.340264+-.081106*r+a*(893e-6+.003796*r))-i,s-=l=n/(1.340264+-.24331799999999998*r+a*(.0062510000000000005+.034164*r)),!(1e-9>Math.abs(l)));++t);a=(r=s*s)*r*r;let h=o*et*e*(1.340264+-.24331799999999998*r+a*(.0062510000000000005+.034164*r))/Math.cos(s),p=o*Math.asin(Math.sin(s)/et);return Math.abs(h)>180?[NaN,NaN]:[h,p]}},ei=Math.PI/4,eo=Math.PI/180,es=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-146.91480769173063,y2:146.91480769173063}}forward(t){return[t[0]*eo*63.78137,79.7267125*Math.log(Math.tan(ei+.4*t[1]*eo))]}inverse(t){return[t[0]/63.78137/eo,2.5*(Math.atan(Math.exp(.8*(t[1]/63.78137)))-ei)/eo]}},er=Math.PI/180,ea=class{constructor(){this.antimeridianCutting=!1,this.bounds={x1:-63.78460826781007,x2:63.78460826781007,y1:-63.78460826781007,y2:63.78460826781007}}forward(t){let e=t[0],i=t[1]*er,o=[Math.cos(i)*Math.sin(e*er)*63.78460826781007,63.78460826781007*Math.sin(i)];return(e<-90||e>90)&&(o.outside=!0),o}inverse(t){let e=t[0]/63.78460826781007,i=t[1]/63.78460826781007,o=Math.sqrt(e*e+i*i),s=Math.asin(o),r=Math.sin(s);return[Math.atan2(e*r,o*Math.cos(s))/er,Math.asin(o&&i*r/o)/er]}},en=Math.PI/180,el=class{constructor(){this.bounds={x1:-200.37508342789243,x2:200.37508342789243,y1:-200.3750834278071,y2:200.3750834278071},this.maxLatitude=85.0511287798}forward(t){let e=Math.sin(t[1]*en),i=[63.78137*t[0]*en,63.78137*Math.log((1+e)/(1-e))/2];return Math.abs(t[1])>this.maxLatitude&&(i.outside=!0),i}inverse(t){return[t[0]/(63.78137*en),(2*Math.atan(Math.exp(t[1]/63.78137))-Math.PI/2)/en]}},{clipLineString:eh,clipPolygon:ep}={clipLineString:function(t,e){let i=[],o=t2(t,e,!1);for(let t=1;t<o.length;t++)o[t].isIntersection&&o[t-1].isIntersection&&(i.push(o.splice(0,t)),t=0),t===o.length-1&&i.push(o);return i},clipPolygon:t2},{clamp:ed,erase:ec}=g(),eu=2*Math.PI/360,em=t=>(t<-180&&(t+=360),t>180&&(t-=360),t),eg=t=>(1-Math.cos(t))/2;class ef{static add(t,e){ef.registry[t]=e}static distance(t,e){let{atan2:i,sqrt:o}=Math,s=((t,e)=>{let i=Math.cos,o=t[1]*eu,s=t[0]*eu,r=e[1]*eu,a=e[0]*eu;return eg(r-o)+i(o)*i(r)*eg(a-s)})(t,e);return 6371e3*(2*i(o(s),o(1-s)))}static geodesic(t,e,i,o=5e5){let{atan2:s,cos:r,sin:a,sqrt:n}=Math,l=ef.distance,h=t[1]*eu,p=t[0]*eu,d=e[1]*eu,c=e[0]*eu,u=r(h)*r(p),m=r(d)*r(c),g=r(h)*a(p),f=r(d)*a(c),b=a(h),y=a(d),x=l(t,e),M=x/6371e3,v=a(M),w=Math.round(x/o),C=[];if(i&&C.push(t),w>1){let t=1/w;for(let e=t;e<.999;e+=t){let t=a((1-e)*M)/v,i=a(e*M)/v,o=t*u+i*m,r=t*g+i*f,l=s(t*b+i*y,n(o*o+r*r)),h=s(r,o);C.push([h/eu,l/eu])}}return i&&C.push(e),C}static insertGeodesics(t){let e=t.length-1;for(;e--;)if(Math.max(Math.abs(t[e][0]-t[e+1][0]),Math.abs(t[e][1]-t[e+1][1]))>10){let i=ef.geodesic(t[e],t[e+1]);i.length&&t.splice(e+1,0,...i)}}static toString(t){let{name:e,rotation:i}=t||{};return[e,i&&i.join(",")].join(";")}constructor(t={}){this.hasCoordinates=!1,this.hasGeoProjection=!1,this.maxLatitude=90,this.options=t;let{name:e,projectedBounds:i,rotation:o}=t;this.rotator=o?this.getRotator(o):void 0;let s=e?ef.registry[e]:void 0;s&&(this.def=new s(t));let{def:r,rotator:a}=this;r&&(this.maxLatitude=r.maxLatitude||90,this.hasGeoProjection=!0),a&&r?(this.forward=t=>r.forward(a.forward(t)),this.inverse=t=>a.inverse(r.inverse(t))):r?(this.forward=t=>r.forward(t),this.inverse=t=>r.inverse(t)):a&&(this.forward=a.forward,this.inverse=a.inverse),this.bounds="world"===i?r&&r.bounds:i}lineIntersectsBounds(t){let{x1:e,x2:i,y1:o,y2:s}=this.bounds||{},r=(t,e,i)=>{let[o,s]=t,r=+!e;if("number"==typeof i&&o[e]>=i!=s[e]>=i){let t=(i-o[e])/(s[e]-o[e]),a=o[r]+t*(s[r]-o[r]);return e?[a,i]:[i,a]}},a,n=t[0];return(a=r(t,0,e))?(n=a,t[1]=a):(a=r(t,0,i))&&(n=a,t[1]=a),(a=r(t,1,o))?n=a:(a=r(t,1,s))&&(n=a),n}getRotator(t){let e=t[0]*eu,i=(t[1]||0)*eu,o=(t[2]||0)*eu,s=Math.cos(i),r=Math.sin(i),a=Math.cos(o),n=Math.sin(o);if(0!==e||0!==i||0!==o)return{forward:t=>{let i=t[0]*eu+e,o=t[1]*eu,l=Math.cos(o),h=Math.cos(i)*l,p=Math.sin(i)*l,d=Math.sin(o),c=d*s+h*r;return[Math.atan2(p*a-c*n,h*s-d*r)/eu,Math.asin(c*a+p*n)/eu]},inverse:t=>{let i=t[0]*eu,o=t[1]*eu,l=Math.cos(o),h=Math.cos(i)*l,p=Math.sin(i)*l,d=Math.sin(o),c=d*a-p*n;return[(Math.atan2(p*a+d*n,h*s+c*r)-e)/eu,Math.asin(c*s-h*r)/eu]}}}forward(t){return t}inverse(t){return t}cutOnAntimeridian(t,e){let i,o=[],s=[t];for(let i=0,s=t.length;i<s;++i){let s=t[i],r=t[i-1];if(!i){if(!e)continue;r=t[t.length-1]}let a=r[0],n=s[0];if((a<-90||a>90)&&(n<-90||n>90)&&a>0!=n>0){let t=ed((180-(a+360)%360)/((n+360)%360-(a+360)%360),0,1),e=r[1]+t*(s[1]-r[1]);o.push({i,lat:e,direction:a<0?1:-1,previousLonLat:r,lonLat:s})}}if(o.length)if(e){o.length%2==1&&(i=o.slice().sort((t,e)=>Math.abs(e.lat)-Math.abs(t.lat))[0],ec(o,i));let e=o.length-2;for(;e>=0;){let i=o[e].i,r=em(180+1e-6*o[e].direction),a=em(180-1e-6*o[e].direction),n=t.splice(i,o[e+1].i-i,...ef.geodesic([r,o[e].lat],[r,o[e+1].lat],!0));n.push(...ef.geodesic([a,o[e+1].lat],[a,o[e].lat],!0)),s.push(n),e-=2}if(i)for(let t=0;t<s.length;t++){let{direction:e,lat:o}=i,r=s[t],a=r.indexOf(i.lonLat);if(a>-1){let t=(o<0?-1:1)*this.maxLatitude,s=em(180+1e-6*e),n=em(180-1e-6*e),l=ef.geodesic([s,o],[s,t],!0);for(let i=s+120*e;i>-180&&i<180;i+=120*e)l.push([i,t]);l.push(...ef.geodesic([n,t],[n,i.lat],!0)),r.splice(a,0,...l);break}}}else{let e=o.length;for(;e--;){let i=o[e].i,r=t.splice(i,t.length,[em(180+1e-6*o[e].direction),o[e].lat]);r.unshift([em(180-1e-6*o[e].direction),o[e].lat]),s.push(r)}}return s}path(t){let e,{bounds:i,def:o,rotator:s}=this,r=[],a="Polygon"===t.type||"MultiPolygon"===t.type,n=this.hasGeoProjection,l=!o||!1!==o.antimeridianCutting,h=l?s:void 0,p=l&&o||this;i&&(e=[[i.x1,i.y1],[i.x2,i.y1],[i.x2,i.y2],[i.x1,i.y2]]);let d=t=>{let o=t.map(t=>{if(l){h&&(t=h.forward(t));let e=t[0];1e-6>Math.abs(e-180)&&(e=e<180?179.999999:180.000001),t=[e,t[1]]}return t}),s=[o];n&&(ef.insertGeodesics(o),l&&(s=this.cutOnAntimeridian(o,a))),s.forEach(t=>{let o,s;if(t.length<2)return;let h=!1,d=!1,c=t=>{h?r.push(["L",t[0],t[1]]):(r.push(["M",t[0],t[1]]),h=!0)},u=!1,m=!1,g=t.map(t=>{let e=p.forward(t);return e.outside?u=!0:m=!0,e[1]===1/0?e[1]=1e10:e[1]===-1/0&&(e[1]=-1e10),e});if(l){if(a&&g.push(g[0]),u){if(!m)return;if(e){if(a)g=ep(g,e);else if(i)return void eh(g,e).forEach(t=>{h=!1,t.forEach(c)})}}g.forEach(c)}else for(let e=0;e<g.length;e++){let i=t[e],r=g[e];r.outside?d=!0:(a&&!o&&(o=i,t.push(i),g.push(r)),d&&s&&(a&&n?ef.geodesic(s,i).forEach(t=>c(p.forward(t))):h=!1),c(r),s=i,d=!1)}})};return"LineString"===t.type?d(t.coordinates):"MultiLineString"===t.type?t.coordinates.forEach(t=>d(t)):"Polygon"===t.type?(t.coordinates.forEach(t=>d(t)),r.length&&r.push(["Z"])):"MultiPolygon"===t.type&&(t.coordinates.forEach(t=>{t.forEach(t=>d(t))}),r.length&&r.push(["Z"])),r}}ef.registry={EqualEarth:ee,LambertConformalConic:t5,Miller:es,Orthographic:ea,WebMercator:el};let{composed:eb}=g(),{pointInPolygon:ey}=t1,{topo2geo:ex}=t0,{boundsFromPath:eM}=tV,{addEvent:ev,clamp:ew,crisp:eC,fireEvent:eT,isArray:eL,isNumber:eP,isObject:eA,isString:ek,merge:ej,pick:ez,pushUnique:eI,relativeLength:eS}=g(),eB={};function eE(t,e){let{width:i,height:o}=e;return Math.log(400.979322/Math.max((t.x2-t.x1)/(i/256),(t.y2-t.y1)/(o/256)))/Math.log(2)}function eD(t){t.seriesOptions.mapData&&this.mapView?.recommendMapView(this,[this.options.chart.map,t.seriesOptions.mapData],this.options.drilldown?.mapZooming)}class eO{static compose(t){eI(eb,"MapView")&&(eB=t.maps,ev(t,"afterInit",function(){this.mapView=new eO(this,this.options.mapView)},{order:0}),ev(t,"addSeriesAsDrilldown",eD),ev(t,"afterDrillUp",eD))}static compositeBounds(t){if(t.length)return t.slice(1).reduce((t,e)=>(t.x1=Math.min(t.x1,e.x1),t.y1=Math.min(t.y1,e.y1),t.x2=Math.max(t.x2,e.x2),t.y2=Math.max(t.y2,e.y2),t),ej(t[0]))}static mergeInsets(t,e){let i=t=>{let e={};return t.forEach((t,i)=>{e[t&&t.id||`i${i}`]=t}),e},o=ej(i(t),i(e));return Object.keys(o).map(t=>o[t])}constructor(t,e){this.allowTransformAnimation=!0,this.eventsToUnbind=[],this.insets=[],this.padding=[0,0,0,0],this.recommendedMapView={},this instanceof eV||this.recommendMapView(t,[t.options.chart.map,...(t.options.series||[]).map(t=>t.mapData)]),this.userOptions=e||{};let i=ej(tF,this.recommendedMapView,e),o=this.recommendedMapView?.insets,s=e&&e.insets;o&&s&&(i.insets=eO.mergeInsets(o,s)),this.chart=t,this.center=i.center,this.options=i,this.projection=new ef(i.projection),this.playingField=t.plotBox,this.zoom=i.zoom||0,this.minZoom=i.minZoom,this.createInsets(),this.eventsToUnbind.push(ev(t,"afterSetChartSize",()=>{this.playingField=this.getField(),(void 0===this.minZoom||this.minZoom===this.zoom)&&(this.fitToBounds(void 0,void 0,!1),!this.chart.hasRendered&&eP(this.userOptions.zoom)&&(this.zoom=this.userOptions.zoom),this.userOptions.center&&ej(!0,this.center,this.userOptions.center))})),this.setUpEvents()}createInsets(){let t=this.options,e=t.insets;e&&e.forEach(e=>{let i=new eV(this,ej(t.insetOptions,e));this.insets.push(i)})}fitToBounds(t,e,i=!0,o){let s=t||this.getProjectedBounds();if(s){let r=ez(e,t?0:this.options.padding),a=this.getField(!1),n=eL(r)?r:[r,r,r,r];this.padding=[eS(n[0],a.height),eS(n[1],a.width),eS(n[2],a.height),eS(n[3],a.width)],this.playingField=this.getField();let l=eE(s,this.playingField);t||(this.minZoom=l);let h=this.projection.inverse([(s.x2+s.x1)/2,(s.y2+s.y1)/2]);this.setView(h,l,i,o)}}getField(t=!0){let e=t?this.padding:[0,0,0,0];return{x:e[3],y:e[0],width:this.chart.plotWidth-e[1]-e[3],height:this.chart.plotHeight-e[0]-e[2]}}getGeoMap(t){if(ek(t))return eB[t]&&"Topology"===eB[t].type?ex(eB[t]):eB[t];if(eA(t,!0)){if("FeatureCollection"===t.type)return t;if("Topology"===t.type)return ex(t)}}getMapBBox(){let t=this.getProjectedBounds(),e=this.getScale();if(t){let i=this.padding,o=this.projectedUnitsToPixels({x:t.x1,y:t.y2});return{width:(t.x2-t.x1)*e+i[1]+i[3],height:(t.y2-t.y1)*e+i[0]+i[2],x:o.x-i[3],y:o.y-i[0]}}}getProjectedBounds(){let t=this.projection,e=this.chart.series.reduce((t,e)=>{let i=e.getProjectedBounds&&e.getProjectedBounds();return i&&!1!==e.options.affectsMapView&&t.push(i),t},[]),i=this.options.fitToGeometry;if(i){if(!this.fitToGeometryCache)if("MultiPoint"===i.type){let e=i.coordinates.map(e=>t.forward(e)),o=e.map(t=>t[0]),s=e.map(t=>t[1]);this.fitToGeometryCache={x1:Math.min.apply(0,o),x2:Math.max.apply(0,o),y1:Math.min.apply(0,s),y2:Math.max.apply(0,s)}}else this.fitToGeometryCache=eM(t.path(i));return this.fitToGeometryCache}return this.projection.bounds||eO.compositeBounds(e)}getScale(){return 256/400.979322*Math.pow(2,this.zoom)}getSVGTransform(){let{x:t,y:e,width:i,height:o}=this.playingField,s=this.projection.forward(this.center),r=this.projection.hasCoordinates?-1:1,a=this.getScale(),n=a*r,l=t+i/2-s[0]*a,h=e+o/2-s[1]*n;return{scaleX:a,scaleY:n,translateX:l,translateY:h}}lonLatToPixels(t){let e=this.lonLatToProjectedUnits(t);if(e)return this.projectedUnitsToPixels(e)}lonLatToProjectedUnits(t){let e=this.chart,i=e.mapTransforms;if(i){for(let o in i)if(Object.hasOwnProperty.call(i,o)&&i[o].hitZone){let s=e.transformFromLatLon(t,i[o]);if(s&&ey(s,i[o].hitZone.coordinates[0]))return s}return e.transformFromLatLon(t,i.default)}for(let e of this.insets)if(e.options.geoBounds&&ey({x:t.lon,y:t.lat},e.options.geoBounds.coordinates[0])){let i=e.projection.forward([t.lon,t.lat]),o=e.projectedUnitsToPixels({x:i[0],y:i[1]});return this.pixelsToProjectedUnits(o)}let o=this.projection.forward([t.lon,t.lat]);if(!o.outside)return{x:o[0],y:o[1]}}pixelsToLonLat(t){return this.projectedUnitsToLonLat(this.pixelsToProjectedUnits(t))}pixelsToProjectedUnits(t){let{x:e,y:i}=t,o=this.getScale(),s=this.projection.forward(this.center),r=this.playingField,a=r.x+r.width/2,n=r.y+r.height/2;return{x:s[0]+(e-a)/o,y:s[1]-(i-n)/o}}projectedUnitsToLonLat(t){let e=this.chart,i=e.mapTransforms;if(i){for(let o in i)if(Object.hasOwnProperty.call(i,o)&&i[o].hitZone&&ey(t,i[o].hitZone.coordinates[0]))return e.transformToLatLon(t,i[o]);return e.transformToLatLon(t,i.default)}let o=this.projectedUnitsToPixels(t);for(let t of this.insets)if(t.hitZone&&ey(o,t.hitZone.coordinates[0])){let e=t.pixelsToProjectedUnits(o),i=t.projection.inverse([e.x,e.y]);return{lon:i[0],lat:i[1]}}let s=this.projection.inverse([t.x,t.y]);return{lon:s[0],lat:s[1]}}projectedUnitsToPixels(t){let e=this.getScale(),i=this.projection.forward(this.center),o=this.playingField,s=o.x+o.width/2,r=o.y+o.height/2;return{x:s-e*(i[0]-t.x),y:r+e*(i[1]-t.y)}}recommendMapView(t,e,i=!1){this.recommendedMapView={};let o=e.map(t=>this.getGeoMap(t)),s=[];o.forEach(t=>{if(t&&(Object.keys(this.recommendedMapView).length||(this.recommendedMapView=t["hc-recommended-mapview"]||{}),t.bbox)){let[e,i,o,r]=t.bbox;s.push({x1:e,y1:i,x2:o,y2:r})}});let r=s.length&&eO.compositeBounds(s);eT(this,"onRecommendMapView",{geoBounds:r,chart:t},function(){if(r&&this.recommendedMapView){if(!this.recommendedMapView.projection){let{x1:t,y1:e,x2:i,y2:o}=r;this.recommendedMapView.projection=i-t>180&&o-e>90?{name:"EqualEarth",parallels:[0,0],rotation:[0]}:{name:"LambertConformalConic",parallels:[e,o],rotation:[-(t+i)/2]}}this.recommendedMapView.insets||(this.recommendedMapView.insets=void 0)}}),this.geoMap=o[0],i&&t.hasRendered&&!t.userOptions.mapView?.projection&&this.recommendedMapView&&this.update(this.recommendedMapView)}redraw(t){this.chart.series.forEach(t=>{t.useMapGeometry&&(t.isDirty=!0)}),this.chart.redraw(t)}setView(t,e,i=!0,o){t&&(this.center=t),"number"==typeof e&&("number"==typeof this.minZoom&&(e=Math.max(e,this.minZoom)),"number"==typeof this.options.maxZoom&&(e=Math.min(e,this.options.maxZoom)),eP(e)&&(this.zoom=e));let s=this.getProjectedBounds();if(s){let t=this.projection.forward(this.center),{x:e,y:i,width:o,height:r}=this.playingField,a=this.getScale(),n=this.projectedUnitsToPixels({x:s.x1,y:s.y1}),l=this.projectedUnitsToPixels({x:s.x2,y:s.y2}),h=[(s.x1+s.x2)/2,(s.y1+s.y2)/2];if(!this.chart.series.some(t=>t.isDrilling)){let s=n.x,p=l.y,d=l.x,c=n.y;d-s<o?t[0]=h[0]:s<e&&d<e+o?t[0]+=Math.max(s-e,d-o-e)/a:d>e+o&&s>e&&(t[0]+=Math.min(d-o-e,s-e)/a),c-p<r?t[1]=h[1]:p<i&&c<i+r?t[1]-=Math.max(p-i,c-r-i)/a:c>i+r&&p>i&&(t[1]-=Math.min(c-r-i,p-i)/a),this.center=this.projection.inverse(t)}this.insets.forEach(t=>{t.options.field&&(t.hitZone=t.getHitZone(),t.playingField=t.getField())}),this.render()}eT(this,"afterSetView"),i&&this.redraw(o)}setUpEvents(){let t,e,i,{chart:o}=this,s=s=>{let{lastTouches:r,pinchDown:a}=o.pointer,n=this.projection,l=s.touches,{mouseDownX:h,mouseDownY:p}=o,d=0;if(a?.length===1?(h=a[0].chartX,p=a[0].chartY):a?.length===2&&(h=(a[0].chartX+a[1].chartX)/2,p=(a[0].chartY+a[1].chartY)/2),l?.length===2&&r&&(d=Math.log(Math.sqrt(Math.pow(r[0].chartX-r[1].chartX,2)+Math.pow(r[0].chartY-r[1].chartY,2))/Math.sqrt(Math.pow(l[0].chartX-l[1].chartX,2)+Math.pow(l[0].chartY-l[1].chartY,2)))/Math.log(.5)),eP(h)&&eP(p)){let r=`${h},${p}`,{chartX:a,chartY:c}=s.originalEvent;l?.length===2&&(a=(l[0].chartX+l[1].chartX)/2,c=(l[0].chartY+l[1].chartY)/2),r!==e&&(e=r,t=this.projection.forward(this.center),i=(this.projection.options.rotation||[0,0]).slice());let u=n.def&&n.def.bounds,m=u&&eE(u,this.playingField)||-1/0;if("Orthographic"===n.options.name&&2>(l?.length||0)&&(this.minZoom||1/0)<1.3*m){let t=440/(this.getScale()*Math.min(o.plotWidth,o.plotHeight));if(i){let e=(h-a)*t-i[0],s=ew(-i[1]-(p-c)*t,-80,80),r=this.zoom;this.update({projection:{rotation:[-e,-s]}},!1),this.fitToBounds(void 0,void 0,!1),this.zoom=r,o.redraw(!1)}}else if(eP(a)&&eP(c)){let e=this.getScale(),i=this.projection.hasCoordinates?1:-1,o=this.projection.inverse([t[0]+(h-a)/e,t[1]-(p-c)/e*i]);isNaN(o[0]+o[1])||this.zoomBy(d,o,void 0,!1)}s.preventDefault()}};ev(o,"pan",s),ev(o,"touchpan",s),ev(o,"selection",t=>{if(t.resetSelection)this.zoomBy();else{let e=t.x-o.plotLeft,i=t.y-o.plotTop,{y:s,x:r}=this.pixelsToProjectedUnits({x:e,y:i}),{y:a,x:n}=this.pixelsToProjectedUnits({x:e+t.width,y:i+t.height});this.fitToBounds({x1:r,y1:s,x2:n,y2:a},void 0,!0,!t.originalEvent.touches&&void 0),/^touch/.test(t.originalEvent.type)||o.showResetZoom(),t.preventDefault()}})}render(){this.group||(this.group=this.chart.renderer.g("map-view").attr({zIndex:4}).add())}update(t,e=!0,i){let o=t.projection,s=o&&ef.toString(o)!==ef.toString(this.options.projection),r=!1;ej(!0,this.userOptions,t),ej(!0,this.options,t),"insets"in t&&(this.insets.forEach(t=>t.destroy()),this.insets.length=0,r=!0),(s||"fitToGeometry"in t)&&delete this.fitToGeometryCache,(s||r)&&(this.chart.series.forEach(t=>{let e=t.transformGroups;if(t.clearBounds&&t.clearBounds(),t.isDirty=!0,t.isDirtyData=!0,r&&e)for(;e.length>1;){let t=e.pop();t&&t.destroy()}}),s&&(this.projection=new ef(this.options.projection)),r&&this.createInsets(),!t.center&&Object.hasOwnProperty.call(t,"zoom")&&!eP(t.zoom)&&this.fitToBounds(void 0,void 0,!1)),t.center||eP(t.zoom)?this.setView(this.options.center,t.zoom,!1):"fitToGeometry"in t&&this.fitToBounds(void 0,void 0,!1),e&&this.chart.redraw(i)}zoomBy(t,e,i,o){let s=this.chart,r=this.projection.forward(this.center);if("number"==typeof t){let a,n,l,h=this.zoom+t;if(i){let[t,e]=i,o=this.getScale(),a=t-s.plotLeft-s.plotWidth/2,h=e-s.plotTop-s.plotHeight/2;n=r[0]+a/o,l=r[1]+h/o}if("number"==typeof n&&"number"==typeof l){let t=1-Math.pow(2,this.zoom)/Math.pow(2,h),e=r[0]-n,i=r[1]-l;r[0]-=e*t,r[1]+=i*t,a=this.projection.inverse(r)}this.setView(e||a,h,void 0,o)}else this.fitToBounds(void 0,void 0,void 0,o)}}class eV extends eO{constructor(t,e){if(super(t.chart,e),this.id=e.id,this.mapView=t,this.options=ej({center:[0,0]},t.options.insetOptions,e),this.allBounds=[],this.options.geoBounds){let e=t.projection.path(this.options.geoBounds);this.geoBoundsProjectedBox=eM(e),this.geoBoundsProjectedPolygon=e.map(t=>[t[1]||0,t[2]||0])}}getField(t=!0){let e=this.hitZone;if(e){let i=t?this.padding:[0,0,0,0],o=e.coordinates[0],s=o.map(t=>t[0]),r=o.map(t=>t[1]),a=Math.min.apply(0,s)+i[3],n=Math.max.apply(0,s)-i[1],l=Math.min.apply(0,r)+i[0],h=Math.max.apply(0,r)-i[2];if(eP(a)&&eP(l))return{x:a,y:l,width:n-a,height:h-l}}return super.getField.call(this,t)}getHitZone(){let{chart:t,mapView:e,options:i}=this,{coordinates:o}=i.field||{};if(o){let s=o[0];if("percent"===i.units){let o="mapBoundingBox"===i.relativeTo&&e.getMapBBox()||ej(t.plotBox,{x:0,y:0});s=s.map(t=>[eS(`${t[0]}%`,o.width,o.x),eS(`${t[1]}%`,o.height,o.y)])}return{type:"Polygon",coordinates:[s]}}}getProjectedBounds(){return eO.compositeBounds(this.allBounds)}isInside(t){let{geoBoundsProjectedBox:e,geoBoundsProjectedPolygon:i}=this;return!!(e&&t.x>=e.x1&&t.x<=e.x2&&t.y>=e.y1&&t.y<=e.y2&&i&&ey(t,i))}render(){let{chart:t,mapView:e,options:i}=this,o=i.borderPath||i.field;if(o&&e.group){let s=!0;this.border||(this.border=t.renderer.path().addClass("highcharts-mapview-inset-border").add(e.group),s=!1),t.styledMode||this.border.attr({stroke:i.borderColor,"stroke-width":i.borderWidth});let r=this.border.strokeWidth(),a="mapBoundingBox"===i.relativeTo&&e.getMapBBox()||e.playingField,n=(o.coordinates||[]).reduce((e,o)=>o.reduce((e,o,s)=>{let[n,l]=o;return"percent"===i.units&&(n=t.plotLeft+eS(`${n}%`,a.width,a.x),l=t.plotTop+eS(`${l}%`,a.height,a.y)),n=eC(n,r),l=eC(l,r),e.push(0===s?["M",n,l]:["L",n,l]),e},e),[]);this.border[s?"animate":"attr"]({d:n})}}destroy(){this.border&&(this.border=this.border.destroy()),this.eventsToUnbind.forEach(t=>t())}setUpEvents(){}}let{animObject:eN,stop:eX}=g(),{noop:eG}=g(),{splitPath:eR}=tO,{column:eW,scatter:eY}=B().seriesTypes,{extend:eU,find:eF,fireEvent:eZ,getNestedProperty:eH,isArray:e_,defined:eK,isNumber:eq,isObject:e$,merge:eJ,objectEach:eQ,pick:e0,splat:e1}=g();class e2 extends eY{constructor(){super(...arguments),this.processedData=[]}animate(t){let{chart:e,group:i}=this,o=eN(this.options.animation);t?i.attr({translateX:e.plotLeft+e.plotWidth/2,translateY:e.plotTop+e.plotHeight/2,scaleX:.001,scaleY:.001}):i.animate({translateX:e.plotLeft,translateY:e.plotTop,scaleX:1,scaleY:1},o)}clearBounds(){this.points.forEach(t=>{delete t.bounds,delete t.insetIndex,delete t.projectedPath}),delete this.bounds}doFullTranslate(){return!!(this.isDirtyData||this.chart.isResizing||!this.hasRendered)}drawMapDataLabels(){super.drawDataLabels(),this.dataLabelsGroups?.forEach(t=>t?.clip(this.chart.clipRect))}drawPoints(){let t=this,{chart:e,group:i,transformGroups:o=[]}=this,{mapView:s,renderer:r}=e;if(s){this.transformGroups=o,o[0]||(o[0]=r.g().add(i));for(let t=0,e=s.insets.length;t<e;++t)o[t+1]||o.push(r.g().add(i));this.doFullTranslate()&&(this.points.forEach(t=>{let{graphic:e}=t;t.group=o["number"==typeof t.insetIndex?t.insetIndex+1:0],e&&e.parentGroup!==t.group&&e.add(t.group)}),eW.prototype.drawPoints.apply(this),this.points.forEach(i=>{let o=i.graphic;if(o){let s=o.animate,r="";i.name&&(r+="highcharts-name-"+i.name.replace(/ /g,"-").toLowerCase()),i.properties?.["hc-key"]&&(r+=" highcharts-key-"+i.properties["hc-key"].toString().toLowerCase()),r&&o.addClass(r),e.styledMode&&o.css(this.pointAttribs(i,i.selected&&"select"||void 0)),o.attr({visibility:!i.visible&&(i.visible||i.isNull)?"hidden":"inherit"}),o.animate=function(i,r,a){let n=eq(i["stroke-width"])&&!eq(o["stroke-width"]),l=eq(o["stroke-width"])&&!eq(i["stroke-width"]);if(n||l){let s=e0(t.getStrokeWidth(t.options),1)/(e.mapView?.getScale()||1);n&&(o["stroke-width"]=s),l&&(i["stroke-width"]=s)}return s.call(o,i,r,l?function(){o.element.removeAttribute("stroke-width"),delete o["stroke-width"],a&&a.apply(this,arguments)}:a)}}})),o.forEach((i,o)=>{let a=(0===o?s:s.insets[o-1]).getSVGTransform(),n=e0(this.getStrokeWidth(this.options),1),l=a.scaleX,h=a.scaleY>0?1:-1,p=e=>{(t.points||[]).forEach(t=>{let i,o=t.graphic;o?.["stroke-width"]&&(i=this.getStrokeWidth(t.options))&&o.attr({"stroke-width":i/e})})};if(r.globalAnimation&&e.hasRendered&&s.allowTransformAnimation){let t=Number(i.attr("translateX")),e=Number(i.attr("translateY")),o=Number(i.attr("scaleX")),s=(s,r)=>{let d=o+(l-o)*r.pos;i.attr({translateX:t+(a.translateX-t)*r.pos,translateY:e+(a.translateY-e)*r.pos,scaleX:d,scaleY:d*h,"stroke-width":n/d}),p(d)},d=eJ(eN(r.globalAnimation)),c=d.step;d.step=function(){c&&c.apply(this,arguments),s.apply(this,arguments)},i.attr({animator:0}).animate({animator:1},d,(function(){"boolean"!=typeof r.globalAnimation&&r.globalAnimation.complete&&r.globalAnimation.complete({applyDrilldown:!0}),eZ(this,"mapZoomComplete")}).bind(this))}else eX(i),i.attr(eJ(a,{"stroke-width":n/l})),p(l)}),this.isDrilling||this.drawMapDataLabels()}}getProjectedBounds(){if(!this.bounds&&this.chart.mapView){let{insets:t,projection:e}=this.chart.mapView,i=[];(this.points||[]).forEach(o=>{if(o.path||o.geometry){if("string"==typeof o.path?o.path=eR(o.path):e_(o.path)&&"M"===o.path[0]&&(o.path=this.chart.renderer.pathToSegments(o.path)),!o.bounds){let i=o.getProjectedBounds(e);if(i){o.labelrank=e0(o.labelrank,(i.x2-i.x1)*(i.y2-i.y1));let{midX:e,midY:s}=i;if(t&&eq(e)&&eq(s)){let r=eF(t,t=>t.isInside({x:e,y:s}));r&&(delete o.projectedPath,(i=o.getProjectedBounds(r.projection))&&r.allBounds.push(i),o.insetIndex=t.indexOf(r))}o.bounds=i}}o.bounds&&void 0===o.insetIndex&&i.push(o.bounds)}}),this.bounds=eO.compositeBounds(i)}return this.bounds}getStrokeWidth(t){let e=this.pointAttrToOptions;return t[e?.["stroke-width"]||"borderWidth"]}hasData(){return!!this.dataTable.rowCount}pointAttribs(t,e){let{mapView:i,styledMode:o}=t.series.chart,s=o?this.colorAttribs(t):eW.prototype.pointAttribs.call(this,t,e),r=this.getStrokeWidth(t.options);if(e){let i=eJ(this.options.states&&this.options.states[e],t.options.states&&t.options.states[e]||{}),o=this.getStrokeWidth(i);eK(o)&&(r=o),s.stroke=i.borderColor??t.color}r&&i&&(r/=i.getScale());let a=this.getStrokeWidth(this.options);return s.dashstyle&&i&&eq(a)&&(r=a/i.getScale()),t.visible||(s.fill=this.options.nullColor),eK(r)?s["stroke-width"]=r:delete s["stroke-width"],s["stroke-linecap"]=s["stroke-linejoin"]=this.options.linecap,s}updateData(){return!this.processedData&&super.updateData.apply(this,arguments)}setData(t,e=!0,i,o){delete this.bounds,super.setData(t,!1,void 0,o),this.processData(),this.generatePoints(),e&&this.chart.redraw(i)}dataColumnKeys(){return this.pointArrayMap}processData(){let t,e,i,o=this.options,s=o.data,r=this.chart,a=r.options.chart,n=this.joinBy,l=o.keys||this.pointArrayMap,h=[],p={},d=this.chart.mapView,c=d&&(e$(o.mapData,!0)?d.getGeoMap(o.mapData):d.geoMap),u=r.mapTransforms=a.mapTransforms||c?.["hc-transform"]||r.mapTransforms;u&&eQ(u,t=>{t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),e_(o.mapData)?i=o.mapData:c&&"FeatureCollection"===c.type&&(this.mapTitle=c.title,i=g().geojson(c,this.type,this)),this.processedData=[];let m=this.processedData;if(s){let t;for(let e=0,i=s.length;e<i;++e){if(eq(t=s[e]))m[e]={value:t};else if(e_(t)){let i=0;m[e]={},!o.keys&&t.length>l.length&&"string"==typeof t[0]&&(m[e]["hc-key"]=t[0],++i);for(let o=0;o<l.length;++o,++i)l[o]&&void 0!==t[i]&&(l[o].indexOf(".")>0?tY.prototype.setNestedProperty(m[e],t[i],l[o]):m[e][l[o]]=t[i])}else m[e]=s[e];n&&"_i"===n[0]&&(m[e]._i=e)}}if(i){this.mapData=i,this.mapMap={};for(let o=0;o<i.length;o++)e=(t=i[o]).properties,t._i=o,n[0]&&e&&e[n[0]]&&(t[n[0]]=e[n[0]]),p[t[n[0]]]=t;if(this.mapMap=p,n[1]){let t=n[1];m.forEach(e=>{let i=eH(t,e);p[i]&&h.push(p[i])})}if(o.allAreas){if(n[1]){let t=n[1];m.forEach(e=>{h.push(eH(t,e))})}let t="|"+h.map(function(t){return t&&t[n[0]]}).join("|")+"|";i.forEach(e=>{n[0]&&-1!==t.indexOf("|"+e[n[0]]+"|")||m.push(eJ(e,{value:null}))})}}this.dataTable.rowCount=m.length}setOptions(t){let e=super.setOptions(t),i=e.joinBy;return null===e.joinBy&&(i="_i"),i&&(this.joinBy=e1(i),this.joinBy[1]||(this.joinBy[1]=this.joinBy[0])),e}translate(){let t=this.doFullTranslate(),e=this.chart.mapView,i=e?.projection;if(this.chart.hasRendered&&(this.isDirtyData||!this.hasRendered)&&(this.processData(),this.generatePoints(),delete this.bounds,!e||e.userOptions.center||eq(e.userOptions.zoom)||e.zoom!==e.minZoom?this.getProjectedBounds():e.fitToBounds(void 0,void 0,!1)),e){let o=e.getSVGTransform();this.points.forEach(s=>{let r=eq(s.insetIndex)&&e.insets[s.insetIndex].getSVGTransform()||o;r&&s.bounds&&eq(s.bounds.midX)&&eq(s.bounds.midY)&&(s.plotX=s.bounds.midX*r.scaleX+r.translateX,s.plotY=s.bounds.midY*r.scaleY+r.translateY),t&&(s.shapeType="path",s.shapeArgs={d:tY.getProjectedPath(s,i)}),!s.hiddenInDataClass&&(s.projectedPath&&!s.projectedPath.length?s.setVisible(!1):s.visible||s.setVisible(!0))})}eZ(this,"afterTranslate")}update(t){t.mapData&&this.chart.mapView?.recommendMapView(this.chart,[this.chart.options.chart.map,...(this.chart.options.series||[]).map((e,i)=>i===this._i?t.mapData:e.mapData)],!0),super.update.apply(this,arguments)}}e2.defaultOptions=eJ(eY.defaultOptions,{affectsMapView:!0,animation:!1,dataLabels:{crop:!1,formatter:function(){let{numberFormatter:t}=this.series.chart,{value:e}=this.point;return tU(e)?t(e,-1):this.point.name||""},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},linecap:"round",marker:null,nullColor:"#f7f7f7",stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:"#e6e6e6",borderWidth:1,joinBy:"hc-key",states:{hover:{halo:void 0,borderColor:"#666666",borderWidth:2},normal:{animation:!0},select:{color:"#cccccc"}},legendSymbol:"rectangle"}),eU(e2.prototype,{type:"map",axisTypes:ty.seriesMembers.axisTypes,colorAttribs:ty.seriesMembers.colorAttribs,colorKey:ty.seriesMembers.colorKey,directTouch:!0,drawDataLabels:eG,drawGraph:eG,forceDL:!0,getCenter:tP.getCenter,getExtremesFromAll:!0,getSymbol:eG,isCartesian:!1,parallelArrays:ty.seriesMembers.parallelArrays,pointArrayMap:ty.seriesMembers.pointArrayMap,pointClass:tY,preserveAspectRatio:!0,searchPoint:eG,trackerGroups:ty.seriesMembers.trackerGroups,useMapGeometry:!0}),ty.compose(e2),B().registerSeriesType("map",e2);let e6=e2,{extend:e3,merge:e8}=g();class e7 extends e6{pointAttribs(t,e){let i=super.pointAttribs(t,e);return i.fill=this.options.fillColor,i}}e7.defaultOptions=e8(e6.defaultOptions,{lineWidth:1,fillColor:"none",legendSymbol:"lineMarker"}),e3(e7.prototype,{type:"mapline",colorProp:"stroke",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),B().registerSeriesType("mapline",e7);let{scatter:e9}=B().seriesTypes,{isNumber:e4}=g();class e5 extends e9.prototype.pointClass{isValid(){return!!(this.options.geometry||e4(this.x)&&e4(this.y)||e4(this.options.lon)&&e4(this.options.lat))}}let{noop:it}=g(),{map:ie,scatter:ii}=B().seriesTypes,{extend:io,fireEvent:is,isNumber:ir,merge:ia}=g();class il extends ii{constructor(){super(...arguments),this.clearBounds=ie.prototype.clearBounds}drawDataLabels(){super.drawDataLabels(),this.dataLabelsGroups?.forEach(t=>{t?.clip(this.chart.clipRect)})}projectPoint(t){let e=this.chart.mapView;if(e){let{geometry:i,lon:o,lat:s}=t,r=i&&"Point"===i.type&&i.coordinates;if(ir(o)&&ir(s)&&(r=[o,s]),r)return e.lonLatToProjectedUnits({lon:r[0],lat:r[1]})}}translate(){let t=this.chart.mapView;if(this.generatePoints(),this.getProjectedBounds&&this.isDirtyData&&(delete this.bounds,this.getProjectedBounds()),t){let e=t.getSVGTransform(),{hasCoordinates:i}=t.projection;this.points.forEach(o=>{let s,{x:r,y:a}=o,n=ir(o.insetIndex)&&t.insets[o.insetIndex].getSVGTransform()||e,l=this.projectPoint(o.options)||o.properties&&this.projectPoint(o.properties);if(l?(r=l.x,a=l.y):o.bounds&&(r=o.bounds.midX,a=o.bounds.midY,n&&ir(r)&&ir(a)&&(o.plotX=r*n.scaleX+n.translateX,o.plotY=a*n.scaleY+n.translateY,s=!0)),ir(r)&&ir(a)){if(!s){let e=t.projectedUnitsToPixels({x:r,y:a});o.plotX=e.x,o.plotY=i?e.y:this.chart.plotHeight-e.y}}else o.y=o.plotX=o.plotY=void 0;o.isInside=this.isPointInside(o),o.zone=this.zones.length?o.getZone():void 0})}is(this,"afterTranslate")}}il.defaultOptions=ia(ii.defaultOptions,{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:"#000000"}},legendSymbol:"lineMarker"}),tz().prototype.symbols.mapmarker=(t,e,i,o,s)=>{let r,a,n=s&&"legend"===s.context;n?(r=t+i/2,a=e+o):s&&"number"==typeof s.anchorX&&"number"==typeof s.anchorY?(r=s.anchorX,a=s.anchorY):(r=t+i/2,a=e+o/2,e-=o);let l=n?o/3:o/2;return[["M",r,a],["C",r,a,r-l,e+1.5*l,r-l,e+l],["A",l,l,1,1,1,r+l,e+l],["C",r+l,e+1.5*l,r,a,r,a],["Z"]]},io(il.prototype,{type:"mappoint",axisTypes:["colorAxis"],forceDL:!0,isCartesian:!1,pointClass:e5,searchPoint:it,useMapGeometry:!0}),B().registerSeriesType("mappoint",il);let ih={borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"0.9em",color:"#000000"},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0},{noop:ip}=g(),{arrayMax:id,arrayMin:ic,isNumber:iu,merge:im,pick:ig,stableSort:ib}=g(),iy=class{constructor(t,e){this.setState=ip,this.init(t,e)}init(t,e){this.options=t,this.visible=!0,this.chart=e.chart,this.legend=e}addToLegend(t){t.splice(this.options.legendIndex,0,this)}drawLegendSymbol(t){let e,i=ig(t.options.itemDistance,20),o=this.legendItem||{},s=this.options,r=s.ranges,a=s.connectorDistance;if(!r||!r.length||!iu(r[0].value)){t.options.bubbleLegend.autoRanges=!0;return}ib(r,function(t,e){return e.value-t.value}),this.ranges=r,this.setOptions(),this.render();let n=this.getMaxLabelSize(),l=this.ranges[0].radius,h=2*l;e=(e=a-l+n.width)>0?e:0,this.maxLabel=n,this.movementX="left"===s.labels.align?e:0,o.labelWidth=h+e+i,o.labelHeight=h+n.height/2}setOptions(){let t=this.ranges,e=this.options,i=this.chart.series[e.seriesIndex],o=this.legend.baseline,s={zIndex:e.zIndex,"stroke-width":e.borderWidth},r={zIndex:e.zIndex,"stroke-width":e.connectorWidth},a={align:this.legend.options.rtl||"left"===e.labels.align?"right":"left",zIndex:e.zIndex},n=i.options.marker.fillOpacity,l=this.chart.styledMode;t.forEach(function(h,p){l||(s.stroke=ig(h.borderColor,e.borderColor,i.color),s.fill=h.color||e.color,s.fill||(s.fill=i.color,s["fill-opacity"]=n??1),r.stroke=ig(h.connectorColor,e.connectorColor,i.color)),t[p].radius=this.getRangeRadius(h.value),t[p]=im(t[p],{center:t[0].radius-t[p].radius+o}),l||im(!0,t[p],{bubbleAttribs:im(s),connectorAttribs:im(r),labelAttribs:a})},this)}getRangeRadius(t){let e=this.options,i=this.options.seriesIndex,o=this.chart.series[i],s=e.ranges[0].value,r=e.ranges[e.ranges.length-1].value,a=e.minSize,n=e.maxSize;return o.getRadius.call(this,r,s,a,n,t)}render(){let t=this.legendItem||{},e=this.chart.renderer,i=this.options.zThreshold;for(let o of(this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),t.symbol=e.g("bubble-legend"),t.label=e.g("bubble-legend-item").css(this.legend.itemStyle||{}),t.symbol.translateX=0,t.symbol.translateY=0,t.symbol.add(t.label),t.label.add(t.group),this.ranges))o.value>=i&&this.renderRange(o);this.hideOverlappingLabels()}renderRange(t){let e=this.ranges[0],i=this.legend,o=this.options,s=o.labels,r=this.chart,a=r.series[o.seriesIndex],n=r.renderer,l=this.symbols,h=l.labels,p=t.center,d=Math.abs(t.radius),c=o.connectorDistance||0,u=s.align,m=i.options.rtl,g=o.borderWidth,f=o.connectorWidth,b=e.radius||0,y=p-d-g/2+f/2,x=(y%1?1:.5)-(f%2?0:.5),M=n.styledMode,v=m||"left"===u?-c:c;"center"===u&&(v=0,o.connectorDistance=0,t.labelAttribs.align="center"),l.bubbleItems.push(n.circle(b,p+x,d).attr(M?{}:t.bubbleAttribs).addClass((M?"highcharts-color-"+a.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(o.className||"")).add(this.legendItem.symbol)),l.connectors.push(n.path(n.crispLine([["M",b,y],["L",b+v,y]],o.connectorWidth)).attr(M?{}:t.connectorAttribs).addClass((M?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(o.connectorClassName||"")).add(this.legendItem.symbol));let w=n.text(this.formatLabel(t)).attr(M?{}:t.labelAttribs).css(M?{}:s.style).addClass("highcharts-bubble-legend-labels "+(o.labels.className||"")).add(this.legendItem.symbol),C={x:b+v+o.labels.x,y:y+o.labels.y+.4*w.getBBox().height};w.attr(C),h.push(w),w.placed=!0,w.alignAttr=C}getMaxLabelSize(){let t,e;return this.symbols.labels.forEach(function(i){e=i.getBBox(!0),t=t?e.width>t.width?e:t:e}),t||{}}formatLabel(t){let e=this.options,i=e.labels.formatter,o=e.labels.format,{numberFormatter:s}=this.chart;return o?tH().format(o,t,this.chart):i?i.call(t):s(t.value,1)}hideOverlappingLabels(){let t=this.chart,e=this.options.labels.allowOverlap,i=this.symbols;!e&&i&&(t.hideOverlappingLabels(i.labels),i.labels.forEach(function(t,e){t.newOpacity?t.newOpacity!==t.oldOpacity&&i.connectors[e].show():i.connectors[e].hide()}))}getRanges(){let t=this.legend.bubbleLegend,e=t.chart.series,i=t.options.ranges,o,s,r=Number.MAX_VALUE,a=-Number.MAX_VALUE;return e.forEach(function(t){t.isBubble&&!t.ignoreSeries&&(s=t.getColumn("z").filter(iu)).length&&(r=ig(t.options.zMin,Math.min(r,Math.max(ic(s),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),a=ig(t.options.zMax,Math.max(a,id(s))))}),o=r===a?[{value:a}]:[{value:r},{value:(r+a)/2},{value:a,autoRanges:!0}],i.length&&i[0].radius&&o.reverse(),o.forEach(function(t,e){i&&i[e]&&(o[e]=im(i[e],t))}),o}predictBubbleSizes(){let t=this.chart,e=t.legend.options,i=e.floating,o="horizontal"===e.layout,s=o?t.legend.lastLineHeight:0,r=t.plotSizeX,a=t.plotSizeY,n=t.series[this.options.seriesIndex],l=n.getPxExtremes(),h=Math.ceil(l.minPxSize),p=Math.ceil(l.maxPxSize),d=Math.min(a,r),c,u=n.options.maxSize;return i||!/%$/.test(u)?c=p:(c=(d+s)*(u=parseFloat(u))/100/(u/100+1),(o&&a-c>=r||!o&&r-c>=a)&&(c=p)),[h,Math.ceil(c)]}updateRanges(t,e){let i=this.legend.options.bubbleLegend;i.minSize=t,i.maxSize=e,i.ranges=this.getRanges()}correctSizes(){let t=this.legend,e=this.chart.series[this.options.seriesIndex].getPxExtremes();Math.abs(Math.ceil(e.maxPxSize)-this.options.maxSize)>1&&(this.updateRanges(this.options.minSize,e.maxPxSize),t.render())}},{setOptions:ix}=g(),{composed:iM}=g(),{addEvent:iv,objectEach:iw,pushUnique:iC,wrap:iT}=g();function iL(t,e,i){let o,s,r,a=this.legend,n=iP(this)>=0;a&&a.options.enabled&&a.bubbleLegend&&a.options.bubbleLegend.autoRanges&&n?(o=a.bubbleLegend.options,s=a.bubbleLegend.predictBubbleSizes(),a.bubbleLegend.updateRanges(s[0],s[1]),o.placed||(a.group.placed=!1,a.allItems.forEach(t=>{(r=t.legendItem||{}).group&&(r.group.translateY=void 0)})),a.render(),o.placed||(this.getMargins(),this.axes.forEach(t=>{t.setScale(),t.updateNames(),iw(t.ticks,function(t){t.isNew=!0,t.isNewLabel=!0})}),this.getMargins()),o.placed=!0,t.call(this,e,i),a.bubbleLegend.correctSizes(),iz(a,iA(a))):(t.call(this,e,i),a&&a.options.enabled&&a.bubbleLegend&&(a.render(),iz(a,iA(a))))}function iP(t){let e=t.series,i=0;for(;i<e.length;){if(e[i]&&e[i].isBubble&&e[i].visible&&e[i].dataTable.rowCount)return i;i++}return -1}function iA(t){let e=t.allItems,i=[],o=e.length,s,r,a,n=0,l=0;for(n=0;n<o;n++)if(r=e[n].legendItem||{},a=(e[n+1]||{}).legendItem||{},r.labelHeight&&(e[n].itemHeight=r.labelHeight),e[n]===e[o-1]||r.y!==a.y){for(i.push({height:0}),s=i[i.length-1];l<=n;l++)e[l].itemHeight>s.height&&(s.height=e[l].itemHeight);s.step=n}return i}function ik(t){let e=this.bubbleLegend,i=this.options,o=i.bubbleLegend,s=iP(this.chart);e&&e.ranges&&e.ranges.length&&(o.ranges.length&&(o.autoRanges=!!o.ranges[0].autoRanges),this.destroyItem(e)),s>=0&&i.enabled&&o.enabled&&(o.seriesIndex=s,this.bubbleLegend=new iy(o,this),this.bubbleLegend.addToLegend(t.allItems))}function ij(t){let e;if(t.defaultPrevented)return!1;let i=t.legendItem,o=this.chart,s=i.visible;this&&this.bubbleLegend&&(i.visible=!s,i.ignoreSeries=s,e=iP(o)>=0,this.bubbleLegend.visible!==e&&(this.update({bubbleLegend:{enabled:e}}),this.bubbleLegend.visible=e),i.visible=s)}function iz(t,e){let i=t.allItems,o=t.options.rtl,s,r,a,n,l=0;i.forEach((t,i)=>{(n=t.legendItem||{}).group&&(s=n.group.translateX||0,r=n.y||0,((a=t.movementX)||o&&t.ranges)&&(a=o?s-t.options.maxSize/2:s+a,n.group.attr({translateX:a})),i>e[l].step&&l++,n.group.attr({translateY:Math.round(r+e[l].height/2)}),n.y=r+e[l].height/2)})}let iI=function(t,e){iC(iM,"Series.BubbleLegend")&&(ix({legend:{bubbleLegend:ih}}),iT(t.prototype,"drawChartBox",iL),iv(e,"afterGetAllItems",ik),iv(e,"itemClick",ij))},iS=e.default.Point;var iB=u.n(iS);let{seriesTypes:{scatter:{prototype:{pointClass:iE}}}}=B(),{extend:iD}=g();class iO extends iE{haloPath(t){let e=(t&&this.marker&&this.marker.radius||0)+t;if(this.series.chart.inverted){let t=this.pos()||[0,0],{xAxis:i,yAxis:o,chart:s}=this.series,r=2*e;return s.renderer.symbols.circle((i?.len||0)-t[1]-e,(o?.len||0)-t[0]-e,r,r)}return iB().prototype.haloPath.call(this,e)}}iD(iO.prototype,{ttBelow:!1});let iV=iO,{composed:iN,noop:iX}=g(),{series:iG,seriesTypes:{column:{prototype:iR},scatter:iW}}=B(),{addEvent:iY,arrayMax:iU,arrayMin:iF,clamp:iZ,extend:iH,isNumber:i_,merge:iK,pick:iq,pushUnique:i$}=g();function iJ(){let t=this.len,{coll:e,isXAxis:i,min:o}=this,s=(this.max||0)-(o||0),r=0,a=t,n=t/s,l;("xAxis"===e||"yAxis"===e)&&(this.series.forEach(t=>{if(t.bubblePadding&&t.reserveSpace()){this.allowZoomOutside=!0,l=!0;let e=t.getColumn(i?"x":"y");if(i&&((t.onPoint||t).getRadii(0,0,t),t.onPoint&&(t.radii=t.onPoint.radii)),s>0){let i=e.length;for(;i--;)if(i_(e[i])&&this.dataMin<=e[i]&&e[i]<=this.max){let s=t.radii&&t.radii[i]||0;r=Math.min((e[i]-o)*n-s,r),a=Math.max((e[i]-o)*n+s,a)}}}}),l&&s>0&&!this.logarithmic&&(a-=t,n*=(t+Math.max(0,r)-Math.min(a,t))/t,[["min","userMin",r],["max","userMax",a]].forEach(t=>{void 0===iq(this.options[t[0]],this[t[1]])&&(this[t[0]]+=t[2]/n)})))}function iQ(){let{ticks:t,tickPositions:e,dataMin:i=0,dataMax:o=0,categories:s}=this,r=this.options.type;if((s?.length||"category"===r)&&this.series.find(t=>t.bubblePadding)){let s=e.length;for(;s--;){let r=t[e[s]],a=r.pos||0;(a>o||a<i)&&r.label?.hide()}}}class i0 extends iW{static compose(t,e,i){iI(e,i),i$(iN,"Series.Bubble")&&(iY(t,"foundExtremes",iJ),iY(t,"afterRender",iQ))}animate(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach(function(t){let{graphic:e,plotX:i=0,plotY:o=0}=t;e&&e.width&&(this.hasRendered||e.attr({x:i,y:o,width:1,height:1}),e.animate(this.markerAttribs(t),this.options.animation))},this)}getRadii(){let t=this.getColumn("z"),e=this.getColumn("y"),i=[],o,s,r,a=this.chart.bubbleZExtremes,{minPxSize:n,maxPxSize:l}=this.getPxExtremes();if(!a){let t,e=Number.MAX_VALUE,i=-Number.MAX_VALUE;this.chart.series.forEach(o=>{if(o.bubblePadding&&o.reserveSpace()){let s=(o.onPoint||o).getZExtremes();s&&(e=Math.min(iq(e,s.zMin),s.zMin),i=Math.max(iq(i,s.zMax),s.zMax),t=!0)}}),t?(a={zMin:e,zMax:i},this.chart.bubbleZExtremes=a):a={zMin:0,zMax:0}}for(s=0,o=t.length;s<o;s++)r=t[s],i.push(this.getRadius(a.zMin,a.zMax,n,l,r,e&&e[s]));this.radii=i}getRadius(t,e,i,o,s,r){let a=this.options,n="width"!==a.sizeBy,l=a.zThreshold,h=e-t,p=.5;if(null===r||null===s)return null;if(i_(s)){if(a.sizeByAbsoluteValue&&(s=Math.abs(s-l),e=h=Math.max(e-l,Math.abs(t-l)),t=0),s<t)return i/2-1;h>0&&(p=(s-t)/h)}return n&&p>=0&&(p=Math.sqrt(p)),Math.ceil(i+p*(o-i))/2}hasData(){return!!this.dataTable.rowCount}markerAttribs(t,e){let i=super.markerAttribs(t,e),{height:o=0,width:s=0}=i;return this.chart.inverted?iH(i,{x:(t.plotX||0)-s/2,y:(t.plotY||0)-o/2}):i}pointAttribs(t,e){let i=this.options.marker,o=i?.fillOpacity,s=iG.prototype.pointAttribs.call(this,t,e);return s["fill-opacity"]=o??1,s}translate(){super.translate.call(this),this.getRadii(),this.translateBubble()}translateBubble(){let{data:t,options:e,radii:i}=this,{minPxSize:o}=this.getPxExtremes(),s=t.length;for(;s--;){let r=t[s],a=i?i[s]:0;"z"===this.zoneAxis&&(r.negative=(r.z||0)<(e.zThreshold||0)),i_(a)&&a>=o/2?(r.marker=iH(r.marker,{radius:a,width:2*a,height:2*a}),r.dlBox={x:r.plotX-a,y:r.plotY-a,width:2*a,height:2*a}):(r.shapeArgs=r.plotY=r.dlBox=void 0,r.isInside=!1)}}getPxExtremes(){let t=Math.min(this.chart.plotWidth,this.chart.plotHeight),e=e=>{let i;return"string"==typeof e&&(i=/%$/.test(e),e=parseInt(e,10)),i?t*e/100:e},i=e(iq(this.options.minSize,8)),o=Math.max(e(iq(this.options.maxSize,"20%")),i);return{minPxSize:i,maxPxSize:o}}getZExtremes(){let t=this.options,e=this.getColumn("z").filter(i_);if(e.length){let i=iq(t.zMin,iZ(iF(e),!1===t.displayNegative?t.zThreshold||0:-Number.MAX_VALUE,Number.MAX_VALUE)),o=iq(t.zMax,iU(e));if(i_(i)&&i_(o))return{zMin:i,zMax:o}}}searchKDTree(t,e,i,o=iX,s=iX){return o=(t,e,i)=>{let o=t[i]||0,s=e[i]||0,r,a=!1;return o===s?r=t.index>e.index?t:e:o<0&&s<0?(r=o-(t.marker?.radius||0)>=s-(e.marker?.radius||0)?t:e,a=!0):r=o<s?t:e,[r,a]},s=(t,e,i)=>!i&&t>e||t<e,super.searchKDTree(t,e,i,o,s)}}i0.defaultOptions=iK(iW.defaultOptions,{dataLabels:{formatter:function(){let{numberFormatter:t}=this.series.chart,{z:e}=this.point;return i_(e)?t(e,-1):""},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),iH(i0.prototype,{alignDataLabel:iR.alignDataLabel,applyZones:iX,bubblePadding:!0,isBubble:!0,keysAffectYAxis:["y"],pointArrayMap:["y","z"],pointClass:iV,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),iY(i0,"updatedData",t=>{delete t.target.chart.bubbleZExtremes}),iY(i0,"remove",t=>{delete t.target.chart.bubbleZExtremes}),B().registerSeriesType("bubble",i0);let i1=i0,{seriesTypes:{map:{prototype:{pointClass:{prototype:i2}}}}}=B(),{extend:i6}=g();class i3 extends iV{isValid(){return"number"==typeof this.z}}i6(i3.prototype,{applyOptions:i2.applyOptions,getProjectedBounds:i2.getProjectedBounds});let{seriesTypes:{map:{prototype:i8},mappoint:{prototype:i7}}}=B(),{extend:i9,merge:i4}=g();class i5 extends i1{constructor(){super(...arguments),this.clearBounds=i8.clearBounds}searchPoint(t,e){return this.searchKDTree({plotX:t.chartX-this.chart.plotLeft,plotY:t.chartY-this.chart.plotTop},e,t)}translate(){i7.translate.call(this),this.getRadii(),this.translateBubble()}}i5.defaultOptions=i4(i1.defaultOptions,{lineWidth:0,animationLimit:500,joinBy:"hc-key",tooltip:{pointFormat:"{point.name}: {point.z}"}}),i9(i5.prototype,{type:"mapbubble",axisTypes:["colorAxis"],getProjectedBounds:i8.getProjectedBounds,isCartesian:!1,pointArrayMap:["z"],pointClass:i3,processData:i8.processData,projectPoint:i7.projectPoint,kdAxisArray:["plotX","plotY"],setData:i8.setData,setOptions:i8.setOptions,updateData:i8.updateData,useMapGeometry:!0,xyFromShape:!0}),B().registerSeriesType("mapbubble",i5);let{scatter:{prototype:{pointClass:ot}}}=B().seriesTypes,{clamp:oe,defined:oi,extend:oo,pick:os}=g();class or extends ot{applyOptions(t,e){return(this.isNull||null===this.value)&&delete this.color,super.applyOptions(t,e),this.formatPrefix=this.isNull||null===this.value?"null":"point",this}getCellAttributes(){let t=this.series,e=t.options,i=(e.colsize||1)/2,o=(e.rowsize||1)/2,s=t.xAxis,r=t.yAxis,a=this.options.marker||t.options.marker,n=t.pointPlacementToXValue(),l=os(this.pointPadding,e.pointPadding,0),h={x1:oe(Math.round(s.len-s.translate(this.x-i,!1,!0,!1,!0,-n)),-s.len,2*s.len),x2:oe(Math.round(s.len-s.translate(this.x+i,!1,!0,!1,!0,-n)),-s.len,2*s.len),y1:oe(Math.round(r.translate(this.y-o,!1,!0,!1,!0)),-r.len,2*r.len),y2:oe(Math.round(r.translate(this.y+o,!1,!0,!1,!0)),-r.len,2*r.len)};for(let t of[["width","x"],["height","y"]]){let e=t[0],i=t[1],o=i+"1",n=i+"2",p=Math.abs(h[o]-h[n]),d=a&&a.lineWidth||0,c=Math.abs(h[o]+h[n])/2,u=a&&a[e];if(oi(u)&&u<p){let t=u/2+d/2;h[o]=c-t,h[n]=c+t}l&&(("x"===i&&s.reversed||"y"===i&&!r.reversed)&&(o=n,n=i+"1"),h[o]+=l,h[n]-=l)}return h}haloPath(t){if(!t)return[];let{x:e=0,y:i=0,width:o=0,height:s=0}=this.shapeArgs||{};return[["M",e-t,i-t],["L",e-t,i+s+t],["L",e+o+t,i+s+t],["L",e+o+t,i-t],["Z"]]}isValid(){return this.value!==1/0&&this.value!==-1/0}}oo(or.prototype,{dataLabelOnNull:!0,moveToTopOnHover:!0,ttBelow:!1});let{isNumber:oa}=g(),{doc:on}=g(),{defined:ol,pick:oh}=g(),{series:op,seriesTypes:{column:od,scatter:oc}}=B(),{prototype:{symbols:ou}}=tz(),{addEvent:om,extend:og,fireEvent:of,isNumber:ob,merge:oy,pick:ox}=g(),{colorFromPoint:oM,getContext:ov}={colorFromPoint:function(t,e){let i=e.series.colorAxis;if(i){let o=i.toColor(t||0,e).split(")")[0].split("(")[1].split(",").map(t=>oh(parseFloat(t),parseInt(t,10)));return o[3]=255*oh(o[3],1),ol(t)&&e.visible||(o[3]=0),o}return[0,0,0,0]},getContext:function(t){let{canvas:e,context:i}=t;return e&&i?(i.clearRect(0,0,e.width,e.height),i):(t.canvas=on.createElement("canvas"),t.context=t.canvas.getContext("2d",{willReadFrequently:!0})||void 0,t.context)}};class ow extends oc{constructor(){super(...arguments),this.valueMax=NaN,this.valueMin=NaN,this.isDirtyCanvas=!0}drawPoints(){let t=this,e=t.options,i=e.interpolation,o=e.marker||{};if(i){let{image:e,chart:i,xAxis:o,yAxis:s}=t,{reversed:r=!1,len:a}=o,{reversed:n=!1,len:l}=s,h={width:a,height:l};if(!e||t.isDirtyData||t.isDirtyCanvas){let a=ov(t),{canvas:l,options:{colsize:p=1,rowsize:d=1},points:c,points:{length:u}}=t,m=i.colorAxis&&i.colorAxis[0];if(l&&a&&m){let{min:m,max:g}=o.getExtremes(),{min:f,max:b}=s.getExtremes(),y=g-m,x=b-f,M=Math.round(y/p/8*8),v=Math.round(x/d/8*8),[w,C]=[[M,M/y,r,"ceil"],[v,v/x,!n,"floor"]].map(([t,e,i,o])=>i?i=>Math[o](t-e*i):t=>Math[o](e*t)),T=l.width=M+1,L=T*(l.height=v+1),P=(u-1)/L,A=new Uint8ClampedArray(4*L),k=(t,e)=>4*Math.ceil(T*C(e-f)+w(t-m));t.buildKDTree();for(let t=0;t<L;t++){let e=c[Math.ceil(P*t)],{x:i,y:o}=e;A.set(oM(e.value,e),k(i,o))}a.putImageData(new ImageData(A,T),0,0),e?e.attr({...h,href:l.toDataURL("image/png",1)}):(t.directTouch=!1,t.image=i.renderer.image(l.toDataURL("image/png",1)).attr(h).add(t.group))}t.isDirtyCanvas=!1}else(e.width!==a||e.height!==l)&&e.attr(h)}else(o.enabled||t._hasPointMarkers)&&(op.prototype.drawPoints.call(t),t.points.forEach(e=>{e.graphic&&(e.graphic[t.chart.styledMode?"css":"animate"](t.colorAttribs(e)),null===e.value&&e.graphic.addClass("highcharts-null-point"))}))}getExtremes(){let{dataMin:t,dataMax:e}=op.prototype.getExtremes.call(this,this.getColumn("value"));return ob(t)&&(this.valueMin=t),ob(e)&&(this.valueMax=e),op.prototype.getExtremes.call(this)}getValidPoints(t,e){return op.prototype.getValidPoints.call(this,t,e,!0)}hasData(){return!!this.dataTable.rowCount}init(){super.init.apply(this,arguments);let t=this.options;t.pointRange=ox(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1,ou.ellipse=ou.circle,t.marker&&ob(t.borderRadius)&&(t.marker.r=t.borderRadius)}markerAttribs(t,e){let i=t.shapeArgs||{};if(t.hasImage)return{x:t.plotX,y:t.plotY};if(e&&"normal"!==e){let o=t.options.marker||{},s=this.options.marker||{},r=s.states?.[e]||{},a=o.states?.[e]||{},n=(a.width||r.width||i.width||0)+(a.widthPlus||r.widthPlus||0),l=(a.height||r.height||i.height||0)+(a.heightPlus||r.heightPlus||0);return{x:(i.x||0)+((i.width||0)-n)/2,y:(i.y||0)+((i.height||0)-l)/2,width:n,height:l}}return i}pointAttribs(t,e){let i=op.prototype.pointAttribs.call(this,t,e),o=this.options||{},s=this.chart.options.plotOptions||{},r=s.series||{},a=s.heatmap||{},n=t?.options.borderColor||o.borderColor||a.borderColor||r.borderColor,l=t?.options.borderWidth||o.borderWidth||a.borderWidth||r.borderWidth||i["stroke-width"];if(i.stroke=t?.marker?.lineColor||o.marker?.lineColor||n||this.color,i["stroke-width"]=l,e&&"normal"!==e){let s=oy(o.states?.[e],o.marker?.states?.[e],t?.options.states?.[e]||{});i.fill=s.color||x().parse(i.fill).brighten(s.brightness||0).get(),i.stroke=s.lineColor||i.stroke}return i}translate(){let{borderRadius:t,marker:e}=this.options,i=e?.symbol||"rect",o=ou[i]?i:"rect",s=-1!==["circle","square"].indexOf(o);for(let e of(this.generatePoints(),this.points)){let r=e.getCellAttributes(),a=Math.min(r.x1,r.x2),n=Math.min(r.y1,r.y2),l=Math.max(Math.abs(r.x2-r.x1),0),h=Math.max(Math.abs(r.y2-r.y1),0);if(e.hasImage=0===(e.marker?.symbol||i||"").indexOf("url"),s){let t=Math.abs(l-h);a=Math.min(r.x1,r.x2)+(l<h?0:t/2),n=Math.min(r.y1,r.y2)+(l<h?t/2:0),l=h=Math.min(l,h)}e.hasImage&&(e.marker={width:l,height:h}),e.plotX=e.clientX=(r.x1+r.x2)/2,e.plotY=(r.y1+r.y2)/2,e.shapeType="path",e.shapeArgs=oy(!0,{x:a,y:n,width:l,height:h},{d:ou[o](a,n,l,h,{r:ob(t)?t:0})})}of(this,"afterTranslate")}}ow.defaultOptions=oy(oc.defaultOptions,{animation:!1,borderRadius:0,borderWidth:0,interpolation:!1,nullColor:"#f7f7f7",dataLabels:{formatter:function(){let{numberFormatter:t}=this.series.chart,{value:e}=this.point;return oa(e)?t(e,-1):""},inside:!0,verticalAlign:"middle",crop:!1,overflow:"allow",padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}},legendSymbol:"rectangle"}),om(ow,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints(),this.options.enableMouseTracking&&this.drawTracker()}),og(ow.prototype,{axisTypes:ty.seriesMembers.axisTypes,colorKey:ty.seriesMembers.colorKey,directTouch:!0,getExtremesFromAll:!0,keysAffectYAxis:["y"],parallelArrays:ty.seriesMembers.parallelArrays,pointArrayMap:["y","value"],pointClass:or,specialGroup:"group",trackerGroups:ty.seriesMembers.trackerGroups,alignDataLabel:od.prototype.alignDataLabel,colorAttribs:ty.seriesMembers.colorAttribs,getSymbol:op.prototype.getSymbol}),ty.compose(ow),B().registerSeriesType("heatmap",ow);let oC=g();oC.ColorMapComposition=ty,oC.MapChart=oC.MapChart||tO,oC.MapNavigation=oC.MapNavigation||tp,oC.MapView=oC.MapView||eO,oC.Projection=oC.Projection||ef,oC.mapChart=oC.Map=oC.MapChart.mapChart,oC.maps=oC.MapChart.maps,oC.geojson=t0.geojson,oC.topo2geo=t0.topo2geo,t0.compose(oC.Chart),i5.compose(oC.Axis,oC.Chart,oC.Legend),tp.compose(tO,oC.Pointer,oC.SVGRenderer),eO.compose(tO);let oT=g();export{oT as default};